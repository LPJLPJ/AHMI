!function(A){function t(){this.fontFamily="fjs"+(999999*Math.random()|0)}if(!Object.defineProperty)throw"Font.js requires Object.defineProperty, which this browser does not support.";if(!document.createElement("canvas").getContext)throw"Font.js requires <canvas> and the Canvas2D API, which this browser does not support.";!function(A){function t(A,t){return this.slice(A,t)}function e(A,t){var e,o=A.length;for(arguments.length<2&&(t=0),e=0;e<o;++e,++t)this[t]=255&A[e]}function o(A){var o,r;if("number"==typeof A)for(o=new Array(A),r=0;r<A;++r)o[r]=0;else o=A.slice(0);return o.subarray=t,o.buffer=o,o.byteLength=o.length,o.set=e,"object"==typeof A&&A.buffer&&(o.buffer=A.buffer),o}try{new Uint8Array(1);return}catch(A){}A.Uint8Array=o,A.Uint32Array=o,A.Int32Array=o}(A),function(A){if(!A.opera&&!("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype)){var t;t=A.VBArray?function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}:function(){this.responseBody},Object.defineProperty(XMLHttpRequest.prototype,"response",{get:t})}}(A),A.btoa||(A.btoa=function(A){var t,e,o,r,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,a=0,f="",l=[];if(!A)return A;do{t=(n=A.charCodeAt(s++)<<16|A.charCodeAt(s++)<<8|A.charCodeAt(s++))>>18&63,e=n>>12&63,o=n>>6&63,r=63&n,l[a++]=i.charAt(t)+i.charAt(e)+i.charAt(o)+i.charAt(r)}while(s<A.length);f=l.join("");var u=A.length%3;return(u?f.slice(0,u-3):f)+"===".slice(u||3)}),t.prototype.url="",t.prototype.format="",t.prototype.data="",t.prototype.base64="AAEAAAAKAIAAAwAgT1MvMgAAAAAAAACsAAAAWGNtYXAAAAAAAAABBAAAACxnbHlmAAAAAAAAATAAAAAQaGVhZAAAAAAAAAFAAAAAOGhoZWEAAAAAAAABeAAAACRobXR4AAAAAAAAAZwAAAAIbG9jYQAAAAAAAAGkAAAACG1heHAAAAAAAAABrAAAACBuYW1lAAAAAAAAAcwAAAAgcG9zdAAAAAAAAAHsAAAAEAAEAAEAZAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAABB//8AAABB////wAABAAAAAAABAAAAAAAAAAAAAAAAMQAAAQAAAAAAAAAAAABfDzz1AAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAgAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAIAAAAAQAAAAIAAQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAIAHgADAAEECQABAAAAAAADAAEECQACAAIAAAAAAAEAAAAAAAAAAAAAAAAAAA==",t.prototype.metrics={quadsize:0,leading:0,ascent:0,descent:0,weightclass:400},t.prototype.systemfont=!1,t.prototype.loaded=!1,t.prototype.onload=function(){},t.prototype.onerror=function(){},t.prototype.canvas=!1,t.prototype.context=!1,t.prototype.validate=function(A,t,e,o,r){!1!==r&&r<0?this.onerror("Requested system font '"+this.fontFamily+"' could not be loaded (it may not be installed)."):getComputedStyle(A,null).getPropertyValue("width").replace("px","")>0?(document.head.removeChild(t),document.body.removeChild(A),this.loaded=!0,this.onload()):(console.log("timing out"),setTimeout(function(){o.validate(A,t,e,o,!1!==r&&r-50)},1e3))},t.prototype.ondownloaded=function(){var A=this,t=function(A){return String.fromCharCode(A)},e=function(A){if(A<256)return t(0)+t(A);var e=255&A;return t(A>>8)+t(e)},o=function(A,t){return 256*A+t},r=function(A,t){var e,o=A>>7==1;return A&=127,e=256*A+t,o?e-32768:e},n=function(A,t,e,o){return 16777216*A+65536*t+256*e+o},i=function(t){A.onerror(t)},s=t(0)+t(1)+t(0)+t(0),a=this.data,f=t(a[0])+t(a[1])+t(a[2])+t(a[3]),l=f===s,u=!l&&"OTTO"===f;if(l)this.format="truetype";else{if(!u)return void i("Error: file at "+this.url+" cannot be interpreted as OpenType font.");this.format="opentype"}var d,c,h=o(a[4],a[5]),p=12+16*h,y={};for(d=12;d<p;d+=16)c=t(a[d])+t(a[d+1])+t(a[d+2])+t(a[d+3]),y[c]={name:c,checksum:n(a[d+4],a[d+5],a[d+6],a[d+7]),offset:n(a[d+8],a[d+9],a[d+10],a[d+11]),length:n(a[d+12],a[d+13],a[d+14],a[d+15])};var m=function(A){return y[A]?A:(i("Error: font is missing the required OpenType '"+A+"' table."),!1)};if(!1!==(c=m("head"))){d=y[c].offset,y[c].version=""+a[d]+a[d+1]+a[d+2]+a[d+3];var v=o(a[d+18],a[d+19]);if(this.metrics.quadsize=v,!1!==(c=m("hhea"))&&(d=y[c].offset,y[c].version=""+a[d]+a[d+1]+a[d+2]+a[d+3],this.metrics.ascent=r(a[d+4],a[d+5])/v,this.metrics.descent=r(a[d+6],a[d+7])/v,this.metrics.leading=r(a[d+8],a[d+9])/v,!1!==(c=m("OS/2"))&&(d=y[c].offset,y[c].version=""+a[d]+a[d+1],this.metrics.weightclass=o(a[d+4],a[d+5]),!1!==(c=m("cmap"))))){d=y[c].offset,y[c].version=""+a[d]+a[d+1],h=o(a[d+2],a[d+3]);for(var b,g,w,x,C=!1,E=0;E<h;E++)g=o(a[b=d+4+8*E],a[b+1]),w=o(a[b+2],a[b+3]),x=n(a[b+4],a[b+5],a[b+6],a[b+7]),3===g&&1===w&&(C=x);var B="A";if(!1!==C&&(d+=C,4===(f=o(a[d],a[d+1])))){for(var T=d+14,F=d+14+2*(o(a[d+6],a[d+7])/2),S=!1;T<F&&(S=o(a[T],a[T+1]),!function(A){return-1===[9,10,11,12,13,32,127,128,129,141,142,143,144,149,157,158,160,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8232,8233,8234,8235,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,12288].indexOf(A)}(S));T+=2)S=!1;if(0!=S){B=String.fromCharCode(S);var q=(65536-(S-1))%65536,M=t(0)+e(S)+e(65535)+e(0)+e(S)+e(65535)+e(q)+e(1),H=btoa(M);this.base64=this.base64.substring(0,380)+H+this.base64.substring(380+H.length)}}this.bootstrapValidation(B,!1)}}},t.prototype.bootstrapValidation=function(A,t){var e=this.fontFamily+" testfont",o=document.createElement("style");o.setAttribute("type","text/css"),o.innerHTML="@font-face {\n  font-family: '"+e+"';\n  src: url('data:application/x-font-ttf;base64,"+this.base64+"')\n       format('truetype');}",document.head.appendChild(o);var r=!1;this.systemfont||(r=this.toStyleNode(),document.head.appendChild(r));var n=document.createElement("p");if(n.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",n.style.fontFamily="'"+this.fontFamily+"', '"+e+"'",n.innerHTML=A+A+A+A+A+A+A+A+A+A,document.body.appendChild(n),"undefined"==typeof getComputedStyle)this.onload(),error("Error: getComputedStyle is not supported by this browser.\nConsequently, Font.onload() cannot be trusted.");else{var i=this.systemfont?1e3:this.metrics.quadsize,s=document.createElement("canvas");s.width=i,s.height=i,this.canvas=s;var a=s.getContext("2d");a.font="1em '"+this.fontFamily+"'",a.fillStyle="white",a.fillRect(-1,-1,i+2,i+2),a.fillStyle="black",a.fillText("test text",50,i/2),this.context=a;var f=this;setTimeout(function(){f.validate(n,o,r,f,t)},50)}},t.prototype.processSystemFont=function(){this.systemfont=!0,this.metrics=!1,this.bootstrapValidation("A",1e3)},t.prototype.loadFont=function(){var A=this;if(-1!==this.url.indexOf(".")){var t=new XMLHttpRequest;t.open("GET",A.url,!0),t.responseType="arraybuffer",t.onload=function(e){var o=t.response;o?(A.data=new Uint8Array(o),A.ondownloaded()):A.onerror("Error downloading font resource from "+A.url)},t.onerror=function(t){A.onerror("Error downloading font resource from "+A.url)},t.send(null)}else setTimeout(function(){A.processSystemFont()},10)},t.prototype.styleNode=!1,t.prototype.toStyleNode=function(){if(this.styleNode)return this.styleNode;this.styleNode=document.createElement("style"),this.styleNode.type="text/css";var A=this.url.replace(".ttf",".eot"),t="@font-face {\n";return t+="  font-family: '"+this.fontFamily+"';\n",t+="  src: url('"+A+"') format(eot), url('"+this.url+"') format('"+this.format+"');\n",t+="}",this.styleNode.innerHTML=t,this.styleNode},t.prototype.measureText=function(A,t){if(!this.loaded)return this.onerror("measureText() was called while the font was not yet loaded"),!1;this.context.font=t+"px '"+this.fontFamily+"'";var e=this.context.measureText(A);e.fontsize=t,e.ascent=0,e.descent=0,e.bounds={minx:0,maxx:e.width,miny:0,maxy:0},e.height=0;var o=[];e.width,this.metrics.quadsize;o.push(A);var r,n=o.length;for(r=0;r<n;r++)this.measureSegment(o[r],t,e);return e},t.prototype.measureSegment=function(A,t,e){var o=document.createElement("div");o.style.position="absolute",o.style.opacity=0,o.style.font=t+"px '"+this.fontFamily+"'";for(o.innerHTML=A,y=1;y<10;y++)o.innerHTML+="<br/>"+A;document.body.appendChild(o),e.leading=1.2*t;var r=function(A,t){return document.defaultView.getComputedStyle(A,null).getPropertyValue(t)}(o,"height");if((r=r.replace("px",""))>=10*t&&(e.leading=r/10|0),document.body.removeChild(o),/^\s*$/.test(A))return e;this.canvas;var n=this.context,i=this.systemfont?1e3:this.metrics.quadsize,s=i,a=i,f=i/2,l=(i-e.width)/2;l!==(0|l)&&(l|=0),n.fillStyle="white",n.fillRect(-50,-50,s+100,a+100),n.fillStyle="black",n.fillText(A,l,f);for(var u=e.width+50|0,d=4*t,c=l-25,h=f-d/2,p=n.getImageData(c,h,u,d).data,y=0,m=0,v=4*u,b=p.length,g=d/2;++y<b&&255===p[y];);var w=y/v|0;for(y=b-1;--y>0&&255===p[y];);var x=y/v|0;for(y=0,m=0;m<u&&255===p[y];)(y+=v)>=b&&(m++,y=y-b+4);var C=m,E=1;for(y=b-3,m=0;m<u&&255===p[y];)(y-=v)<0&&(m++,y=b-3-4*E++);var B=u-m;return e.ascent=g-w,e.descent=x-g,e.bounds={minx:C-25,maxx:B-25,miny:-e.descent,maxy:e.ascent},e.height=x-w+1,e},Object.defineProperty(t.prototype,"src",{set:function(A){this.url=A,this.loadFont()}}),"undefined"!=typeof define?define(function(){return t}):A.Font=t}(window);