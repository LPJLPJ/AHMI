ideServices.service("MiddleWareService",["AnimationService","Type",function(i,t){function n(){var i,t,n,a,e;i=arguments[0],t=i.pages||[],t.forEach(function(i){o.page(i),n=i.layers||[],n.forEach(function(i){o.layer(i),a=i.subLayers||[],a.forEach(function(t){o.subLayer(t,i.info||{}),e=t.widgets||[],e.forEach(function(i){o.widget(i)})}),n.showSubLayer=a[0]})})}function a(i){return parseInt((i.version||"1.0.0").replace(/\./g,""))<parseInt((e||"").replace(/\./g,""))||!0}var e=window.ideVersion,o=Object.create({num:function(){var t=arguments[0],n=t.info;if(void 0===n.paddingRatio){var a,e;n.paddingRatio=.1,n.spacing=Math.ceil(-n.fontSize/3),n.maxFontWidth=n.fontSize,n.paddingX=Math.ceil(n.fontSize*n.paddingRatio),a="0"==n.symbolMode?n.numOfDigits*(n.fontSize+n.spacing)-n.spacing:(n.numOfDigits+1)*(n.fontSize+n.spacing)-n.spacing,a+=2*n.paddingX,0!=n.decimalCount&&(a+=.5*n.fontSize+this.spacing),e=Math.ceil(1.2*n.fontSize),n.width=a,n.height=e}void 0===t.transition&&(t.transition=i.getDefaultTransition()),void 0===n.enableAnimation&&(n.enableAnimation=!1)},texNum:function(){var t=arguments[0];t.info;void 0===t.transition&&(t.transition=i.getDefaultTransition())},dateTime:function(){var i=arguments[0],t=i.info;if(void 0===t.paddingRatio){var n,a,e;t.paddingRatio=.1,t.spacing=t.spacing=Math.ceil(-t.fontSize/3),n="0"==t.dateTimeModeId?8*t.fontSize+7*t.spacing:"1"==t.dateTimeModeId?5*t.fontSize+4*t.spacing:10*t.fontSize+9*t.spacing,a=n+2*t.paddingRatio*t.fontSize,e=t.fontSize*(1+2*t.paddingRatio),t.width=a,t.height=e}void 0==t.disableHighlight&&(t.disableHighlight=!1)},texTime:function(){var i=arguments[0],t=i.info;void 0==t.disableHighlight&&(t.disableHighlight=!1)},progress:function(){var t=arguments[0],n=t.info;void 0===n.thresholdModeId&&(n.thresholdModeId="1",n.threshold1=null,n.threshold2=null),void 0===n.enableAnimation&&(n.enableAnimation=!1),void 0===t.transition&&(t.transition=i.getDefaultTransition())},dashboard:function(){var t=arguments[0],n=t.info;void 0===n.minCoverAngle&&(n.minCoverAngle=0,n.maxCoverAngle=0),void 0===n.enableAnimation&&(n.enableAnimation=!1),void 0===t.transition&&(t.transition=i.getDefaultTransition())},button:function(){var i=arguments[0],t=i.info;void 0===t.disableHighlight&&(t.disableHighlight=!1)},buttonGroup:function(){var i=arguments[0],t=i.info;void 0===t.disableHighlight&&(t.disableHighlight=!1)},slide:function(){var i=arguments[0],t=i.info;void 0===t.fontFamily&&(t.fontFamily="宋体",t.fontSize=20,t.fontColor="rgba(0,0,0,1)",t.fontBold="100",t.fontItalic="")},mySwitch:function(){var i=arguments[0],t=i.info;void 0===t.text&&(t.text="",t.fontFamily="宋体",t.fontSize=20,t.fontColor="rgba(0,0,0,1)",t.fontBold="100",t.fontItalic="")}});Object.assign(o,{page:function(t){void 0===t.transition&&(t.transition=i.getDefaultTransition())},layer:function(t){void 0===t.transition&&(t.transition=i.getDefaultTransition()),t.animations&&t.animations.map(function(i){var t,n,a=i.animationAttrs&&i.animationAttrs.translate,e=i.animationAttrs&&i.animationAttrs.scale;if(a&&a.dstPos&&"number"==typeof a.dstPos.x){for(n in a)t=a[n].x,a[n].x={value:t||0,tag:""},t=a[n].y,a[n].y={value:t||0,tag:""};for(n in e)t=e[n].x,e[n].x={value:t,tag:""},t=e[n].y,e[n].y={value:t,tag:""}}void 0===i.timingFun&&(i.timingFun="")})},subLayer:function(i,t){var t=t||{};i.info||Object.assign(i,{info:{width:t.width||400,height:t.height||240,scrollVEnabled:!1,scrollHEnabled:!1}})},widget:function(i){switch(i.type){case t.MyNum:this.num(i);break;case t.MyDateTime:this.dateTime(i);break;case t.MyTexNum:this.texNum(i);break;case t.MyTexTime:this.texTime(i);break;case t.MyProgress:this.progress(i);break;case t.MyDashboard:this.dashboard(i);break;case t.MyButton:this.button(i);break;case t.MyButtonGroup:this.buttonGroup(i);break;case t.MySlide:this.slide(i);break;case t.MySwitch:this.mySwitch(i)}}}),this.useMiddleWare=function(i){a(i)&&n(i)}}]);