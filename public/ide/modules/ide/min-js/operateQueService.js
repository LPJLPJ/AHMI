ideServices.service("OperateQueService",["$timeout","ProjectService",function(e,t){var n=[],r=[],u=20,o={undoEnable:!1,redoEnable:!1};this.getOperateQueStatus=function(){return o={undoEnable:0!=n.length,redoEnable:0!=r.length}},this.pushNewOperate=function(e){n.length>=u&&n.shift(),n.push(e),r=[]},this.undo=function(u,o){if(!this.getOperateQueStatus().undoEnable)return void(o&&o());var i=n[n.length-1];e(function(){t.LoadCurrentOperate(i.undoOperate,function(){r.push(n.pop()),u&&u()},o)})},this.redo=function(u,o){this.getOperateQueStatus().redoEnable||o();var i=r[r.length-1];e(function(){t.LoadCurrentOperate(i.redoOperate,function(){n.push(r.pop()),u&&u()},o)})}}]);