ideServices.service("NavService",["CanvasService","ProjectService","OperateQueService","Type","$timeout",function(e,t,n,r,o){var u=this;this.getDeleteStatus=function(){return t.getCurrentSelectObject().type!=r.MyPage},this.getOperateQueStatus=function(){return n.getOperateQueStatus()},this.getLayerStatus=function(){return t.isEditingPage()},this.getSubLayerStatus=function(){return t.getCurrentSelectObject().type==r.MyLayer},this.getWidgetStatus=function(){return!t.isEditingPage()},this.getPageStatus=function(){return t.getCurrentSelectObject().type==r.MyPage},this.getCopyStatus=function(){return t.getCurrentSelectObject().type!=r.MyPage&&t.getCurrentSelectObject().type!=r.MySubLayer},this.getPasteStatus=function(){return t.shearPlateEnable()},this.DoCopy=function(e){if(u.getCopyStatus()){var n=t.getCurrentSelectObject();n.type==r.MyLayer?t.CopyLayer(n.level,function(){e&&e()}):n.type==r.MyGroup&&0==n.mode?t.CopyLayerGroup(n.target,function(){e&&e()}):r.isWidget(n.type)?t.CopyWidget(n.level,function(){e&&e()}):n.type==r.MyGroup&&1==n.mode?t.CopyWidgetGroup(n.target,function(){e&&e()}):console.warn("无效的复制")}},this.DoPaste=function(e){u.getPasteStatus()&&t.DoPaste(function(){e&&e()})};var i=!1;this.DoDelete=function(e){if(u.getDeleteStatus()&&!i){i=!0;var n=t.getCurrentSelectObject();n.type==r.MyLayer||n.type==r.MyGroup&&0==n.mode?t.DeleteActiveLayers(function(){e&&e(),i=!1}):n.type==r.MySubLayer?t.DeleteCurrentSubLayer(function(){e&&e(),i=!1}):r.isWidget(n.type)||n.type==r.MyGroup&&1==n.mode?t.DeleteActiveWidgets(function(){e&&e(),i=!1}):(i=!1,console.warn("不可删除"))}},this.DoMove=function(e,n,o){var u=t.getCurrentSelectObject();u.type==r.MyLayer||u.type==r.MyGroup&&0==u.mode?t.MoveActiveObjects("layers",e,n,function(){o&&o()}):r.isWidget(u.type)||u.type==r.MyGroup&&1==u.mode?t.MoveActiveObjects("widgets",e,n,function(){o&&o()}):(i=!1,console.warn("不可删除"))};var c=!1;this.DoUndo=function(e){if(u.getOperateQueStatus().undoEnable){if(c)return void console.log("正在撤销...");c=!0,n.undo(function(){c=!1,e&&e()}),o(function(){c=!1},800)}};var a=!1;this.DoRedo=function(e){if(u.getOperateQueStatus().redoEnable){if(a)return void console.log("正在重做");a=!0,n.redo(function(){a=!1,e&&e()}),o(function(){a=!1},800)}}}]);