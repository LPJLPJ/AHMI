ideServices.service("NavService",["CanvasService","ProjectService","OperateQueService","Type","$timeout",function(e,t,n,r,o){var i=this;this.getDeleteStatus=function(){var e=t.getCurrentSelectObject();return e.type!=r.MyPage},this.getOperateQueStatus=function(){return n.getOperateQueStatus()},this.getLayerStatus=function(){return t.isEditingPage()},this.getSubLayerStatus=function(){var e=t.getCurrentSelectObject();return e.type==r.MyLayer},this.getWidgetStatus=function(){return!t.isEditingPage()},this.getCopyStatus=function(){return t.getCurrentSelectObject().type!=r.MyPage&&t.getCurrentSelectObject().type!=r.MySubLayer},this.getPasteStatus=function(){return t.shearPlateEnable()},this.DoCopy=function(e){if(i.getCopyStatus()){var n=t.getCurrentSelectObject();n.type==r.MyLayer?t.CopyLayer(n.level,function(){e&&e()}):n.type==r.MyGroup&&0==n.mode?t.CopyLayerGroup(n.target,function(){e&&e()}):r.isWidget(n.type)?t.CopyWidget(n.level,function(){e&&e()}):n.type==r.MyGroup&&1==n.mode?t.CopyWidgetGroup(n.target,function(){e&&e()}):console.warn("无效的复制")}},this.DoPaste=function(e){i.getPasteStatus()&&t.DoPaste(function(){e&&e()})};var u=!1;this.DoDelete=function(e){if(i.getDeleteStatus()&&!u){u=!0;var n=t.getCurrentSelectObject();n.type==r.MyLayer||n.type==r.MyGroup&&0==n.mode?t.DeleteActiveLayers(function(){e&&e(),u=!1}):n.type==r.MySubLayer?t.DeleteCurrentSubLayer(function(){e&&e(),u=!1}):r.isWidget(n.type)||n.type==r.MyGroup&&1==n.mode?t.DeleteActiveWidgets(function(){e&&e(),u=!1}):(u=!1,console.warn("不可删除"))}},this.DoMove=function(e,n,o){var i=t.getCurrentSelectObject();i.type==r.MyLayer||i.type==r.MyGroup&&0==i.mode?t.MoveActiveObjects("layers",e,n,function(){o&&o()}):r.isWidget(i.type)||i.type==r.MyGroup&&1==i.mode?t.MoveActiveObjects("widgets",e,n,function(){o&&o()}):(u=!1,console.warn("不可删除"))};var a=!1;this.DoUndo=function(e){if(i.getOperateQueStatus().undoEnable){if(a)return void console.log("正在撤销...");a=!0,n.undo(function(){a=!1,e&&e()}),o(function(){a=!1},800)}};var c=!1;this.DoRedo=function(e){if(i.getOperateQueStatus().redoEnable){if(c)return void console.log("正在重做");c=!0,n.redo(function(){c=!1,e&&e()}),o(function(){c=!1},800)}}}]);