ideServices.service("ProjectTransformService",["Type",function(a){function e(a,e){return actionCompiler.transformer.trans(actionCompiler.parser.parse(a),e)}function t(a,t){if(t=t||!0,a&&a.actions&&a.actions.length)for(var n=0;n<a.actions.length;n++){var r=a.actions[n];r.commands=e(r.commands,t)}}function n(a){var e={};e.version=a.version,e.name=a.name||"default project",e.author=a.author||"author",e.size=a.currentSize,e.lastSaveTimeStamp=a.lastSaveTimeStamp,e.lastSaveUUID=a.lastSaveUUID,e.pageList=[];for(var t=0;t<a.pages.length;t++)e.pageList.push(r(a.pages[t],t));return e}function r(e,n){var r={};r.id=""+n,r.type=a.MyPage,u(e,r,["name","backgroundImage","backgroundColor","triggers","actions","tag","transition"]),t(r),r.canvasList=[];for(var s=0;s<e.layers.length;s++)r.canvasList.push(i(e.layers[s],s,r.id));return r}function i(e,n,r){var i={};i.id=r+"."+n,i.type=a.MyLayer,u(e,i,["name","triggers","actions","tag","zIndex","animations","transition"]),t(i),i.w=e.info.width,i.h=e.info.height,i.x=e.info.left,i.y=e.info.top,i.subCanvasList=[];for(var o=0;o<e.subLayers.length;o++){var c=e.subLayers[o];e.showSubLayer.id==c&&(i.curSubCanvasIdx=o),i.subCanvasList.push(s(c,o,i.id))}return i}function s(e,n,r){var i={};i.id=r+"."+n,i.type=a.MySubLayer,u(e,i,["name","tag","actions","zIndex","backgroundImage","backgroundColor"]),t(i),i.widgetList=[];for(var s=0;s<e.widgets.length;s++){var c=e.widgets[s];i.widgetList.push(o(c,s,i.id))}return i}function o(a,e,n){var r={};return r=_.cloneDeep(a),t(r),r.type="widget",r.subType=a.type,r.id=n+"."+e,r}function u(a,e,t){for(var n=0;n<t.length;n++){var r=t[n];"object"==typeof a[r]?e[r]=_.cloneDeep(a[r]):e[r]=a[r]}}this.transDataFile=n}]);