ideServices.service("ProjectTransformService",["Type",function(e){function a(e,a){return actionCompiler.transformer.trans(actionCompiler.parser.parse(e),a)}function n(e,n){if(n=n||!0,e&&e.actions&&e.actions.length)for(var r=0;r<e.actions.length;r++){var t=e.actions[r];t.commands=a(t.commands,n)}}function r(e){var a={};a.version=e.version,a.name=e.name||"default project",a.author=e.author||"author",a.size=e.currentSize,a.pageList=[];for(var n=0;n<e.pages.length;n++)a.pageList.push(t(e.pages[n],n));return a}function t(a,r){var t={};t.id=""+r,t.type=e.MyPage,u(a,t,["name","backgroundImage","backgroundColor","triggers","actions","tag","transition"]),n(t),t.canvasList=[];for(var o=0;o<a.layers.length;o++)t.canvasList.push(i(a.layers[o],o,t.id));return t}function i(a,r,t){var i={};i.id=t+"."+r,i.type=e.MyLayer,u(a,i,["name","triggers","actions","tag","zIndex","animations","transition"]),n(i),i.w=a.info.width,i.h=a.info.height,i.x=a.info.left,i.y=a.info.top,i.subCanvasList=[];for(var s=0;s<a.subLayers.length;s++){var c=a.subLayers[s];a.showSubLayer.id==c&&(i.curSubCanvasIdx=s),i.subCanvasList.push(o(c,s,i.id))}return i}function o(a,r,t){var i={};i.id=t+"."+r,i.type=e.MySubLayer,u(a,i,["name","tag","actions","zIndex","backgroundImage","backgroundColor"]),n(i),i.widgetList=[];for(var o=0;o<a.widgets.length;o++){var c=a.widgets[o];i.widgetList.push(s(c,o,i.id))}return i}function s(e,a,r){var t={};return t=_.cloneDeep(e),n(t),t.type="widget",t.subType=e.type,t.id=r+"."+a,t}function u(e,a,n){for(var r=0;r<n.length;r++){var t=n[r];"object"==typeof e[t]?a[t]=_.cloneDeep(e[t]):a[t]=e[t]}}this.transDataFile=r}]);