ide.controller("ImageSelectorInstanceCtl",["$scope","$timeout","$uibModalInstance","Type","ResourceService","widgetInfo","TexService",function(e,c,t,o,n,i,s){function a(c,t,o,n,i,s){e.canAddNewSlice=c,e.sliceNum=t,e.tex=o,e.disableEditName=n,e.disableEditImg=i,e.disableEditColor=s}function l(){e.tempSlices=_.cloneDeep(e.tex.slices)}function r(e){e.name="selectSlice.color"}function d(){c(function(){e.tex.slices=_.cloneDeep(e.tempSlices)})}function u(){return"rgba("+_.random(64,255)+","+_.random(64,255)+","+_.random(64,255)+",1.0)"}switch(e.images=n.getAllImagesAndTemplates(),e.images.unshift({name:"---",src:""}),e.basicUrl=n.getResourceUrl(),e.$on("colorpicker-submit",function(e,c){r(c)}),e.$on("colorpicker-closed",function(e,c){d()}),e.$on("colorpicker-shown",function(e,c){l()}),e.canAddNewSlice=!1,e.disableEditImg=!1,e.disableEditColor=!1,e.sliceNum=0,i.type){case o.MyButton:a(!1,2,i.tex,!1,!1,!1);break;case o.MyProgress:"1"!==i.objInfo.progressModeId&&"3"!==i.objInfo.progressModeId||1!=i.index&&2!=i.index&&3!=i.index?a(!1,1,i.tex,!0,!1,!1):a(!1,1,i.tex,!0,!0,!1),"光标纹理"===i.tex.name&&a(!1,1,i.tex,!0,!1,!0);break;case o.MySlide:a(!0,2,i.tex,!1,!1,!1);break;case o.MyNumber:a(!1,13,i.tex,!1,!1,!1);break;case o.MyDashboard:a(!1,2,i.tex,!1,!1,!1);break;case o.MyTextArea:case o.MyNum:a(!1,1,i.tex,!1,!1,!1);break;case o.MyOscilloscope:case o.MyKnob:a(!1,2,i.tex,!1,!1,!1);break;case o.MyImage:case o.MySwitch:case o.MyRotateImg:case o.MySlideBlock:a(!1,1,i.tex,!1,!1,!1);break;case o.MyAnimation:a(!0,1,i.tex,!1,!1,!1);break;case o.MyTexNum:a(!1,1,i.tex,!0,!1,!1);break;default:a(!0,1,i.tex,!1,!1,!1)}e.addSlice=function(){e.tex.slices.splice(e.curIndex+1,0,s.getDefaultSlice())},e.removeSlice=function(c){1==e.tex.slices.length?toastr.warning("至少有一张纹理"):e.tex.slices.splice(c,1)},e.save=function(){t.close(e.tex)},e.cancel=function(){t.dismiss("cancel")},e.disableColorInput=function(e,c){console.log(e,c),e.imgSrc?e.color="rgba(0,0,0,0)":e.color=u()},e.curIndex=0,e.selectItem=function(c){e.curIndex=c}}]);