ide.controller("ImageSelectorInstanceCtl",["$scope","$timeout","$uibModalInstance","Type","ResourceService","widgetInfo","TexService",function(e,c,t,a,n,o,s){function i(c,t,a){e.canAddNewSlice=c,e.sliceNum=t,e.tex=a}function r(){e.tempSlices=_.cloneDeep(e.tex.slices)}function l(e){e.name="selectSlice.color"}function u(){c(function(){e.tex.slices=_.cloneDeep(e.tempSlices)})}function m(){var e=_.random(64,255),c=_.random(64,255),t=_.random(64,255);return"rgba("+e+","+c+","+t+",1.0)"}switch(e.images=n.getAllImagesAndTemplates(),e.images.unshift({name:"---",src:""}),e.basicUrl=n.getResourceUrl(),e.$on("colorpicker-submit",function(e,c){l(c)}),e.$on("colorpicker-closed",function(e,c){u(c)}),e.$on("colorpicker-shown",function(e,c){r()}),e.canAddNewSlice=!1,e.sliceNum=0,o.type){case a.MyButton:i(!1,2,o.tex);break;case a.MyProgress:i(!1,1,o.tex);break;case a.MySlide:i(!0,2,o.tex);break;case a.MyNumber:i(!1,13,o.tex);break;case a.MyDashboard:i(!1,2,o.tex);break;case a.MyTextArea:i(!1,1,o.tex);break;case a.MyNum:i(!1,1,o.tex);break;case a.MyOscilloscope:i(!1,2,o.tex);break;case a.MyKnob:i(!1,2,o.tex);break;case a.MyImage:i(!1,1,o.tex);break;case a.MySwitch:i(!1,1,o.tex);break;case a.MyRotateImg:i(!1,1,o.tex);break;case a.MySlideBlock:i(!1,1,o.tex);break;case a.MyAnimation:i(!0,1,o.tex);break;default:i(!0,1,o.tex)}e.addSlice=function(){e.tex.slices.push(s.getDefaultSlice())},e.removeSlice=function(c){e.tex.slices.splice(c,1)},e.save=function(){t.close(e.tex)},e.cancel=function(){t.dismiss("cancel")},e.disableColorInput=function(e){e.imgSrc?e.color="rgba(0,0,0,0)":e.color=m()}}]);