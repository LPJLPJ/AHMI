ide.controller("AttrCtrl",["$scope","$timeout","ProjectService",function(e,n,t){function o(){e.component={out:{toolShow:!1},top:{currentNav:0,navs:[{name:"属性"},{name:"资源"},{name:"变量"},{name:"字体"}],changeNav:f},bottom:{page:null,selectPage:a,selectLayer:c,selectSubLayer:i,selectWidget:u}}}function r(){n(function(){t.getProjectTo(e),l()}),e.toggleShow=g,e.$on("ToolShowChanged",function(n,t){e.component.out.toolShow=t}),e.$on("PageChangedSwitched",function(e){l()}),e.$on("AttributeChanged",function(e){p()})}function a(n){var o=-1;_.forEach(e.project.pages,function(e,t){e.id==n&&(o=t)}),logs.push("选择了第"+o+"个页面"),console.log("选择了第"+o+"个页面"),t.OnPageSelected(o,function(){e.$emit("ChangeCurrentPage",null,function(){})})}function c(n){t.OnLayerSelected(n,function(){e.$emit("ChangeCurrentPage")})}function i(n,o){var r=t.getCurrentPage(),a=_.indexOf(r.layers,n),c=_.indexOf(n.subLayers,o);t.OnSubLayerSelected(a,c,function(){e.$emit("ChangeCurrentSubLayer")})}function u(n,o,r){var a=t.getCurrentPage();_.indexOf(a.layers,n),_.indexOf(n.subLayers,o),_.indexOf(n.widgets,o);t.OnWidgetSelected(r,function(){e.$emit("ChangeCurrentSubLayer",null,function(){})})}function f(t){n(function(){e.component.top.currentNav=t})}function g(e){var n=d(e);n&&(n.expand=!n.expand)}function l(){var t;_.forEach(e.project.pages,function(e){e.current&&(t=e)}),n(function(){e.component.bottom.page=t})}function d(n){if(n==e.component.bottom.page.id)return e.component.bottom.page;for(var t=e.component.bottom.page.layers,o=0;o<t.length;o++){var r=t[o];if(r.id==n)return r;for(var a=0;a<r.subLayers.length;a++){var c=r.subLayers[a];if(c.id==n)return c;for(var i=0;i<c.widgets.length;i++){var u=c.widgets[i];if(u.id==n)return u}}}}function p(){n(function(){e.component.bottom.page=t.getCurrentPage()})}e.$on("GlobalProjectReceived",function(){o(),r(),e.$emit("LoadUp")})}]);