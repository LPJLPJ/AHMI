ide.controller("characterSetCtrl",["$scope","characterSetService","$timeout","ProjectService","Type","Preference","ResourceService","CanvasService","UserTypeService",function(e,t,n,o,a,c,r,l,i){function u(){e.componentOfChar={character:{text:null,fontName:"默认",fontFamily:"宋体",fontSize:"20px",fontColor:null,fontBold:null,fontItalic:null,fontAlignment:null},fontFamilies:[],enableInput:f,disableInput:h,allCharacters:[],selectCharacterByIndex:d}}function m(){var t=r.getAllFontResources().map(function(t){var n={name:t.name};return e.customFontDisabled&&(n.type="disable"),n});console.log(t),e.componentOfChar.fontFamilies=[{name:"宋体"},{name:"Arial"},{name:"times"}].concat(t)}function s(){e.componentOfChar.allCharacters=t.getCharacterSet(),e.customFontDisabled=i.getCustomFontAuthor(),m(),e.$on("ResourceChanged",function(e){console.log("Fonts changed!!"),m()})}function f(e){var t=document.getElementById("characterNameInput"),n=t.getElementsByTagName("input");0<=e&&e<n.length&&n[e].removeAttribute("readonly")}function h(e){var t=document.getElementById("characterNameInput"),n=t.getElementsByTagName("input");0<=e&&e<n.length&&n[e].setAttribute("readonly","readonly")}function d(n){console.log("hh"),e.componentOfChar.character=t.selectCharacterByIndex(n)}e.$on("GlobalProjectReceived",function(){u(),s()})}]);