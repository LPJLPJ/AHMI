ide.controller("AttributeCtrl",["$scope","$rootScope","$timeout","ProjectService","Type","Preference","ResourceService","characterSetService","CanvasService","AnimationService","UserTypeService",function(e,n,t,o,i,r,l,a,c,u,m){function f(){e.component={type:"",onAttributeChanged:d,transitionMode:u.getTransitionModes(),transitionName:null,page:{enterImage:H,selectImage:"demo20.png"},layer:{enterShowSubLayer:z,selectModel:null},subLayer:{enterImage:H,selectImage:"blank.png",scrollVEnabled:"0",scrollHEnabled:"0",scrollModes:[{id:"0",name:"否"},{id:"1",name:"是"}],changeScrollEnable:Je},slide:{addSubSlide:h},button:{buttonModeId:"0",buttonModes:[{id:"0",name:"普通模式"},{id:"1",name:"开关模式"}],highlightModeId:"0",enterButtonMode:me,enterArrange:U},buttonGroup:{enterInterval:R,enterButtonCount:W,enterArrange:U,highlightModeId:"0"},progress:{progressModeId:"0",enableAnimationModeId:"0",progressModes:[{id:"0",name:"普通进度条"},{id:"1",name:"变色进度条"},{id:"3",name:"多色进度条"}],thresholdModeId:"1",thresholdModes:[{id:"1",name:"两段色"},{id:"2",name:"三段色"}],enterProgressValue:G,enterArrange:U,enterCursor:E,enterThresholdMode:X,enterThresholdValue1:Y,enterThresholdValue2:Z},dashboard:{dashboardModeId:"0",clockwise:"1",dashboardModes:[{id:"0",name:"简单模式"},{id:"1",name:"复杂模式"},{id:"2",name:"精简模式"}],dashboardClockwise:[{wise:"1",name:"顺时针"},{wise:"0",name:"逆时针"}],enableAnimationModeId:"0",enterDashboardMode:J,enterDashboardClockwise:ee,enterDashboardValue:Q,enterDashboardOffsetValue:K,enterPointerLength:q,enterMinCoverAngle:ne,enterMaxCoverAngle:te},textArea:{enterText:fe,selectCharacterSetByIndex:ge,selectCharacterSetByName:ve,addCharacterSet:de,deleteCharacterSetByIndex:se,enterArrange:U},num:{numModeId:"0",enableAnimationModeId:"0",numModes:[{id:"0",name:"普通模式"},{id:"1",name:"动画模式"}],symbolMode:"0",symbolModes:[{id:"0",name:"无符号模式"},{id:"1",name:"有符号模式"}],frontZeroMode:"0",frontZeroModes:[{id:"0",name:"无前导0模式"},{id:"1",name:"有前导0模式"}],overFlowStyle:"0",overFlowStyles:[{id:"0",name:"溢出不显示"},{id:"1",name:"溢出显示"}],changeNumOfDigits:be,changeDecimalCount:pe,enterNumMode:he,enterSymbolMode:Ce,enterFrontZeroMode:je,enterOverFlowStyle:ye,enterNumValue:Me,changeNumAlign:Ae,enterArrange:U},texNum:{numModeId:"0",enableAnimationModeId:"0",numModes:[{id:"0",name:"普通模式"},{id:"1",name:"动画模式"}],symbolMode:"0",symbolModes:[{id:"0",name:"无符号模式"},{id:"1",name:"有符号模式"}],frontZeroMode:"0",frontZeroModes:[{id:"0",name:"无前导0模式"},{id:"1",name:"有前导0模式"}],overFlowStyle:"0",overFlowStyles:[{id:"0",name:"溢出不显示"},{id:"1",name:"溢出显示"}],changeNumOfDigits:be,changeDecimalCount:pe,enterNumMode:he,enterSymbolMode:Ce,enterFrontZeroMode:je,enterOverFlowStyle:ye,enterNumValue:Me,changeNumAlign:Ae,enterCharacterW:Se,enterCharacterH:Ie},knob:{backgroundImage:"blank.png",knobImg:"blank.png",enterKnobSize:Le,enterKnobValue:ze},oscilloscope:{changeOscSpacing:He,changeOscGrid:Xe,changeOscLinWidth:Re,changeOscGridInitValue:We,changeOscGridUnitX:Ge,changeOscGridUnitY:Ee},switchWidget:{enterBindBit:Ye},rotateImg:{enterInitValue:Ze},dateTime:{dateTimeModes:[{id:"0",name:"时分秒模式"},{id:"1",name:"时分模式"},{id:"2",name:"斜杠日期"},{id:"3",name:"减号日期"}],RTCModes:[{id:"0",name:"使用内部时钟"},{id:"1",name:"使用外部时钟"}],highlightModeId:"0",enterDateTimeMode:Ue,enterArrange:U},texTime:{dateTimeModes:[{id:"0",name:"时分秒模式"},{id:"1",name:"时分模式"},{id:"2",name:"斜杠日期"},{id:"3",name:"减号日期"}],RTCModes:[{id:"0",name:"使用内部时钟"},{id:"1",name:"使用外部时钟"}],highlightModeId:"0",enterDateTimeMode:Ue,enterArrange:U,enterCharacterW:Se,enterCharacterH:Ie},selector:{highlightModeId:"0",enterItemWidth:ke,enterItemHeight:Fe,enterSelectorWidth:Ne,enterSelectorHeight:Pe,enterSelectorLeft:Ve,enterSelectorTop:xe,enterItemCount:Oe,enterCurValue:$e,enterItemShowCount:Be,enterSelectorTitle:De,enterSelectorFontSize:F,enterSelectorFontFamily:P,enterSelectorFontBold:x,enterSelectorFontItalic:$,changeX:we,changeY:Te},rotaryKnob:{highlightModeId:"0",enterCurValue:_e},colorBlock:{highlightModeId:"0"},slideBlock:{enterInitValue:Ze,enterArrange:U},video:{source:[{id:"CVBS",name:"CVBS"},{id:"HDMI",name:"HDMI"}],scale:[{id:"0",name:"非原比例"},{id:"1",name:"原比例"}],changeVideoSource:Qe,changeVideoScale:qe},group:{align:[{id:"top",name:"上对齐"},{id:"bottom",name:"下对齐"},{id:"left",name:"左对齐"},{id:"right",name:"右对齐"}],alignModeId:null,changeGroupAlign:Ke},highlightModes:[{id:"0",name:"启用高亮"},{id:"1",name:"禁用高亮"}],enableAnimationModes:[{id:"0",name:"启用动画"},{id:"1",name:"关闭动画"}],enterName:C,enterColor:w,enterFontText:T,enterFontSize:k,enterFontFamily:N,enterFontBold:V,enterFontItalic:O,enterX:j,enterY:y,enterAbsoluteX:M,enterAbsoluteY:A,enterWidth:S,enterHeight:I,enterImage:H,enterMinValue:oe,enterMaxValue:ie,enterMinAngle:re,enterMaxAngle:le,enterMinAlert:ae,enterMaxAlert:ce,restore:s,changeTransitionName:b,changeTransitionDur:p,enterHighlightMode:D,enterEnableAnimationMode:L,enterSpacing:ue},e.animationsDisabled=m.getAnimationAuthor()}function g(){o.getProjectTo(e),e.maxWidth=e.project.initSize.width||1280,e.maxHeight=e.project.initSize.height||1080,d(),v(),en(),e.$on("ResourceChanged",function(){v()}),e.$on("AttributeChanged",function(e){d()}),e.$on("colorpicker-submit",function(e,n){w(n)}),e.$on("colorpicker-closed",function(e,n){s()}),e.$on("changeFontFamily",function(e,n){enterFontStyle(n)})}function v(){var n={id:"blank.png",src:"",name:"空白"};t(function(){e.component.images=l.getAllImages(),e.component.images.unshift(n)})}function d(){var n=o.getCurrentSelectObject(),l=!1;n.type===i.MySelector&&e.component.object.type===i.MySelector&&(l=!0,e.component.object.level.info.left===n.level.info.left&&e.component.object.level.info.top===n.level.info.top&&(l=!1)),t(function(){switch(e.component.object=_.cloneDeep(n),nn=_.cloneDeep(n),e.component.object.type){case i.MyLayer:e.component.layer.selectModel=e.component.object.level.showSubLayer.id,e.component.transitionName=e.component.object.level.transition.name;break;case i.MyPage:e.component.page.selectImage=e.component.object.level.backgroundImage,e.component.transitionName=e.component.object.level.transition.name;break;case i.MySubLayer:var t=e.component.object.level.info.scrollVEnabled,o=e.component.object.level.info.scrollHEnabled;e.component.object.level.info.preview;e.component.subLayer.scrollVEnabled=t?"1":"0",e.component.subLayer.scrollHEnabled=o?"1":"0";break;case i.MyGroup:var a=r.GROUP_CONTROL_VISIBLE;n.target.setControlsVisibility(a),e.component.group.alignModeId=null;break;case i.MyProgress:e.component.progress.arrangeModel=e.component.object.level.info.arrange,e.component.progress.cursor=e.component.object.level.info.cursor,e.component.progress.progressModeId=e.component.object.level.info.progressModeId,e.component.progress.thresholdModeId=e.component.object.level.info.thresholdModeId,!1===e.component.object.level.info.enableAnimation?e.component.progress.enableAnimationModeId="1":!0===e.component.object.level.info.enableAnimation&&(e.component.progress.enableAnimationModeId="0");break;case i.MyDashboard:e.component.dashboard.dashboardModeId=e.component.object.level.dashboardModeId,e.component.dashboard.clockwise=e.component.object.level.info.clockwise,!1===e.component.object.level.info.enableAnimation?e.component.dashboard.enableAnimationModeId="1":!0===e.component.object.level.info.enableAnimation&&(e.component.dashboard.enableAnimationModeId="0");break;case i.MyTextArea:e.component.textArea.arrangeModel=e.component.object.level.info.arrange;break;case i.MyButton:case i.General:e.component.button.buttonModeId=e.component.object.level.buttonModeId,e.component.button.arrangeModel=e.component.object.level.info.arrange,!1===e.component.object.level.info.disableHighlight?e.component.button.highlightModeId="0":!0===e.component.object.level.info.disableHighlight&&(e.component.button.highlightModeId="1");break;case i.MyButtonGroup:e.component.buttonGroup.arrangeModel=e.component.object.level.info.arrange,!1===e.component.object.level.info.disableHighlight?e.component.buttonGroup.highlightModeId="0":!0===e.component.object.level.info.disableHighlight&&(e.component.buttonGroup.highlightModeId="1");break;case i.MyNum:e.component.num.numModeId=e.component.object.level.info.numModeId,e.component.num.symbolMode=e.component.object.level.info.symbolMode,e.component.num.frontZeroMode=e.component.object.level.info.frontZeroMode,e.component.num.overFlowStyle=e.component.object.level.info.overFlowStyle,e.component.num.arrangeModel=e.component.object.level.info.arrange,e.component.transitionName=e.component.object.level.transition.name,!1===e.component.object.level.info.enableAnimation?e.component.num.enableAnimationModeId="1":!0===e.component.object.level.info.enableAnimation&&(e.component.num.enableAnimationModeId="0");break;case i.MyTexNum:e.component.texNum.numModeId=e.component.object.level.info.numModeId,e.component.texNum.symbolMode=e.component.object.level.info.symbolMode,e.component.texNum.frontZeroMode=e.component.object.level.info.frontZeroMode,e.component.texNum.overFlowStyle=e.component.object.level.info.overFlowStyle,e.component.texNum.arrangeModel=e.component.object.level.info.arrange,e.component.transitionName=e.component.object.level.transition.name,0==e.component.object.level.info.enableAnimation?e.component.texNum.enableAnimationModeId="1":1==e.component.object.level.info.enableAnimation&&(e.component.texNum.enableAnimationModeId="0");break;case i.MyDateTime:e.component.dateTime.arrangeModel=e.component.object.level.info.arrange,e.component.dateTime.dateTimeModeId=e.component.object.level.info.dateTimeModeId,e.component.dateTime.RTCModeId=e.component.object.level.info.RTCModeId,0==e.component.object.level.info.disableHighlight?e.component.dateTime.highlightModeId="0":1==e.component.object.level.info.disableHighlight&&(e.component.dateTime.highlightModeId="1");break;case i.MyTexTime:e.component.texTime.arrangeModel=e.component.object.level.info.arrange,e.component.texTime.dateTimeModeId=e.component.object.level.info.dateTimeModeId,e.component.texTime.RTCModeId=e.component.object.level.info.RTCModeId,0==e.component.object.level.info.disableHighlight?e.component.texTime.highlightModeId="0":1==e.component.object.level.info.disableHighlight&&(e.component.texTime.highlightModeId="1");break;case i.MySelector:l&&(l=!1,we(),Te());break;case i.MySlideBlock:e.component.slideBlock.arrangeModel=e.component.object.level.info.arrange;break;case i.MyVideo:e.component.video.sourceId=e.component.object.level.info.source;break;case i.MySlide:case i.MySwitch:}})}function s(){t(function(){e.component.object=_.cloneDeep(nn)})}function b(){for(var n={name:e.component.transitionName},t=0;t<e.component.transitionMode.length;t++)if(e.component.transitionMode[t].name==e.component.transitionName){n.show=e.component.transitionMode[t].show;break}o.ChangeAttributeTransition(n)}function p(n){if(13==n.keyCode){if(e.component.object.level.transition.duration>5e3||e.component.object.level.transition.duration<0)return toastr.warning("超出限制"),void s();if(!_.isInteger(e.component.object.level.transition.duration))return toastr.warning("输入不合法"),void s();if(e.component.object.level.transition.duration==nn.level.transition.duration)return;var t={duration:e.component.object.level.transition.duration};toastr.info("修改成功"),o.ChangeAttributeTransition(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function h(){}function C(n,t){if(13==n.keyCode){if(e.component.object.level.name==nn.level.name)return void(t.component.object.level.name=e.component.object.level.name);if(!o.inputValidate(e.component.object.level.name))return void s();toastr.info("修改成功");var i={name:e.component.object.level.name};o.ChangeAttributeName(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function j(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.left);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<-2e3||t>2e3)return toastr.warning("超出画布范围"),void s();if(t==nn.level.info.left)return void toastr.warning("未改变值"+e.component.object.level.info.left);var i={left:t};o.ChangeAttributePosition(i,function(n){e.$emit("ChangeCurrentPage",n);var t=e.component.object.level.info;o.setAbsolutePosition(t)})}else if("selector"===n.type){var t=n.value;if(t<-2e3||t>2e3)return toastr.warning("超出画布范围"),!1;if(t==nn.level.info.left)return!0;var i={left:t};return e.component.object.level.info.left=t,o.ChangeAttributePosition(i,function(n){e.$emit("ChangeCurrentPage",n)}),!0}}function y(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.top);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<-2e3||t>2e3)return toastr.warning("超出范围"),void s();if(t==nn.level.info.top)return;var i={top:t};o.ChangeAttributePosition(i,function(n){e.$emit("ChangeCurrentPage",n);var t=e.component.object.level.info;o.setAbsolutePosition(t)})}else if("selector"===n.type){var t=n.value;if(t<-2e3||t>2e3)return toastr.warning("超出画布范围"),!1;if(t==nn.level.info.top)return!0;var i={top:t};return e.component.object.level.info.top=t,o.ChangeAttributePosition(i,function(n){e.$emit("ChangeCurrentPage",n)}),!0}}function M(t){var i=Number(n.position.absoluteX),r=n.position.absoluteX-n.position.currentLayerInfo.left;if(13==t.keyCode){if(!_.isInteger(i))return toastr.warning("输入不合法"),void(n.position.absoluteX=n.position.initAbsoluteX);if(r<-2e3||r>2e3)return toastr.warning("超出画布范围"),void(n.position.absoluteX=n.position.initAbsoluteX);if(i==n.position.initAbsoluteX)return void toastr.warning("未改变值"+n.position.absoluteX);var l={left:r};o.ChangeAttributePosition(l,function(n){e.$emit("ChangeCurrentPage",n)})}}function A(t){if(13==t.keyCode){var i=Number(n.position.absoluteY),r=n.position.absoluteY-n.position.currentLayerInfo.top;if(!_.isInteger(i))return toastr.warning("输入不合法"),void(n.position.absoluteY=n.position.initAbsoluteY);if(r<-2e3||r>2e3)return toastr.warning("超出画布范围"),void(n.position.absoluteY=n.position.initAbsoluteY);if(i==n.position.initAbsoluteY)return void toastr.warning("未改变值"+n.position.absoluteY);var l={top:r};o.ChangeAttributePosition(l,function(n){e.$emit("ChangeCurrentPage",n)})}}function S(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.width),r=e.component.object.level.type;if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<1||t>2e3)return toastr.warning("超出范围"),void s();if(r===i.MySubLayer){var l=o.getCurrentLayer();if(t<(l&&l.info.width))return toastr.warning("子图层宽度不能小于父图层宽度"),void s()}if(t==nn.level.info.width)return void console.log("没有变化");var a={width:t};toastr.info("修改成功"),o.ChangeAttributeSize(a,function(n){e.$emit("ChangeCurrentPage",n)})}}function I(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.height),r=e.component.object.level.type;if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<1||t>2e3)return toastr.warning("超出范围"),void s();if(r===i.MySubLayer){var l=o.getCurrentLayer();if(t<(l&&l.info.height))return toastr.warning("子图层的高度不能小于父图层的高度"),void s()}if(t==nn.level.info.height)return void console.log("没有变化");var a={height:t};toastr.info("修改成功"),o.ChangeAttributeSize(a,function(n){e.$emit("ChangeCurrentPage",n)})}}function w(n){var t,i,r=null,l=null;for(t=n.value.slice(5,n.value.length-1),t=t.split(","),i=0;i<t.length-1;i++)if(t[i]>255||t[i]<0||!_.isInteger(Number(t[i])))return toastr.warning("格式错误"),void s();if(4===t.length){var a=t[t.length-1];if(a<0||a>1)return toastr.warning("格式错误"),void s()}if("component.object.level.backgroundColor"==n.name){if(nn.level.backgroundColor==n.value)return;r=o.SaveCurrentOperate(),l={color:n.value},o.ChangeAttributeBackgroundColor(l,function(){e.$emit("ChangeCurrentPage",r)})}if("component.object.level.info.fontColor"==n.name){if(nn.level.info.fontColor==n.value)return;l={fontColor:n.value},B(l)}if("component.object.level.info.lineColor"==n.name){if(nn.level.info.lineColor==n.value)return;l={lineColor:n.value},r=o.SaveCurrentOperate(),o.ChangeAttributeOscilloscope(l,function(n){e.$emit("ChangeCurrentPage",n)})}if("component.object.level.info.itemFont.fontColor"==n.name){if(nn.level.info.itemFont.ffontColor==n.value)return;l={itemFontFontColor:n.value},B(l)}if("component.object.level.info.selectorFont.fontColor"==n.name){if(nn.level.info.selectorFont.fontColor==n.value)return;l={selectorFontFontColor:n.value},B(l)}if("component.object.level.info.titleFont.fontColor"==n.name){if(nn.level.info.titleFont.fontColor==n.value)return;l={titleFontFontColor:n.value},B(l)}}function T(n){if(13==n.keyCode){var t=e.component.object.level.info.text;if(t==nn.level.info.text)return;if(t.length>20)return toastr.warning("字数最大20"),void s();B({text:t})}}function k(n){if(13==n.keyCode){var t=e.component.object.level.info.fontSize;if(!_.isInteger(Number(t)))return toastr.warning("输入不合法"),void s();if(t<0||t>150)return toastr.warning("超出范围"),void s();if(t==nn.level.info.fontSize)return;B({fontSize:t})}}function F(n,t){if(13==n.keyCode){if("itemFont"===t)var o=e.component.object.level.info.itemFont.fontSize,i={itemFontFontSize:o},r=nn.level.info.itemFont.fontSize;else if("selectorFont"==t)var o=e.component.object.level.info.selectorFont.fontSize,i={selectorFontFontSize:o},r=nn.level.info.selectorFont.fontSize;else{if("titleFont"!=t)return;var o=e.component.object.level.info.titleFont.fontSize,i={titleFontFontSize:o},r=nn.level.info.titleFont.fontSize}if(!_.isInteger(Number(o)))return toastr.warning("输入不合法"),void s();if(o<0||o>150)return toastr.warning("超出范围"),void s();if(o==r)return;B(i)}}function N(n){var t=e.component.object.level.info.fontFamily;if(t!=nn.level.info.fontFamily){B({fontFamily:t})}}function P(n,t){if("itemFont"===t)var o=e.component.object.level.info.itemFont.fontFamily,i={itemFontFontFamily:o},r=nn.level.info.itemFont.fontFamily;else if("selectorFont"==t)var o=e.component.object.level.info.selectorFont.fontFamily,i={selectorFontFontFamily:o},r=nn.level.info.selectorFont.fontFamily;else{if("titleFont"!=t)return;var o=e.component.object.level.info.titleFont.fontFamily,i={titleFontFontFamily:o},r=nn.level.info.titleFont.fontFamily}o!=r&&B(i)}function V(n){var t=e.component.object.level.info.fontBold;"100"===t?t="bold":"bold"===t&&(t="100"),B({fontBold:t})}function x(n,t){if("itemFont"===t){var o=e.component.object.level.info.itemFont.fontBold;"100"===o?o="bold":"bold"===o&&(o="100");var i={itemFontFontBold:o}}else if("selectorFont"==t){var o=e.component.object.level.info.selectorFont.fontBold;"100"===o?o="bold":"bold"===o&&(o="100");var i={selectorFontFontBold:o}}else{if("titleFont"!=t)return;var o=e.component.object.level.info.titleFont.fontBold;"100"===o?o="bold":"bold"===o&&(o="100");var i={titleFontFontBold:o}}B(i)}function O(n){var t=e.component.object.level.info.fontItalic;""===t?t="italic":"italic"===t&&(t=""),B({fontItalic:t})}function $(n,t){if("itemFont"===t){var o=e.component.object.level.info.itemFont.fontItalic;""===o?o="italic":"italic"===o&&(o="");var i={itemFontFontItalic:o}}else if("selectorFont"==t){var o=e.component.object.level.info.selectorFont.fontItalic;o="italic"===o?"":"italic";var i={selectorFontFontItalic:o}}else{if("titleFont"!=t)return;var o=e.component.object.level.info.titleFont.fontItalic;""===o?o="italic":"italic"===o&&(o="");var i={titleFontFontItalic:o}}B(i)}function B(n){o.SaveCurrentOperate();switch(o.getCurrentSelectObject().type){case i.MyTextArea:o.ChangeAttributeTextContent(n,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyDateTime:o.ChangeAttributeDateTimeText(n,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyNum:o.ChangeAttributeNumContent(n,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MySelector:o.ChangeSelectorFontStyle(n,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MySwitch:case i.MySlide:case i.MyButton:o.ChangeAttributeFontStyle(n,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MySelector:o.ChangeSelectorFontStyle(n,function(n){e.$emit("ChangeCurrentPage",n)});break;default:console.error("not match in change font color!")}}function D(){var n=o.getCurrentSelectObject(),t=null;n.type==i.MyButton?t=e.component.button.highlightModeId:n.type==i.MyButtonGroup?t=e.component.buttonGroup.highlightModeId:n.type==i.MyDateTime?t=e.component.dateTime.highlightModeId:n.type==i.MyTexTime?t=e.component.texTime.highlightModeId:n.type==i.MySelector&&(t=e.component.selector.highlightModeId);var r={highlightMode:t};o.ChangeAttributeHighLightMode(r,function(n){e.$emit("ChangeCurrentPage",n)})}function L(){var n,t=o.getCurrentSelectObject();t.type==i.MyDashboard?n=e.component.dashboard.enableAnimationModeId:t.type==i.MyProgress?n=e.component.progress.enableAnimationModeId:t.type==i.MyNum?n=e.component.num.enableAnimationModeId:t.type===i.MyTexNum&&(n=e.component.texNum.enableAnimationModeId);var r={enableAnimationModeId:n};o.ChangeEnableAnimationMode(r,function(n){e.$emit("ChangeCurrentPage",n)})}function z(n){var t=o.SaveCurrentOperate(),i=e.component.layer.selectModel,r=o.getCurrentLayer();_.forEach(r.subLayers,function(n,r){n.id==i&&o.changeCurrentSubLayerIndex(r,function(){e.$emit("ChangeCurrentPage",t)})})}function H(){var n="",t=null,r=null;if(e.component.object.type===i.MyPage)n=e.component.page.selectImage,t=o.getCurrentPage();else{if(e.component.object.type!==i.MySubLayer)return;n=e.component.subLayer.selectImage,o.getCurrentSubLayer()}r={image:n},o.ChangeAttributeBackgroundImage(r,function(o){n?(e.component.object.level.backgroundColor="rgb(0,0,0)",t.backgroundColor="rgb(0,0,0)"):(e.component.object.level.backgroundColor="rgb(54,71,92)",t.backgroundColor="rgb(54,71,92)"),e.$emit("ChangeCurrentPage",o)})}function R(n){if(13==n.keyCode){if(!_.isInteger(Number(e.component.object.level.info.interval))||parseInt(e.component.object.level.info.interval)<0)return toastr.warning("输入不合法"),void s();if((e.component.object.level.info.interval||0)*((e.component.object.level.info.count||0)-1)>(e.component.object.level.info.width||0))return toastr.warning("配置不合理"),void s();if(e.component.object.level.info.interval==nn.level.info.interval)return;var t={interval:e.component.object.level.info.interval},i=o.SaveCurrentOperate();o.ChangeAttributeInterval(t,function(){e.$emit("ChangeCurrentPage",i)})}}function W(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.count))||parseInt(e.component.object.level.info.interval)<0)return toastr.warning("输入不合法"),void s();if((e.component.object.level.info.interval||0)*((e.component.object.level.info.count||0)-1)>(e.component.object.level.info.width||0))return toastr.warning("配置不合理"),void s();if(e.component.object.level.info.count==nn.level.info.count)return;if(e.component.object.level.info.count<2)return toastr.warning("按钮数至少为2"),void s();if(e.component.object.level.info.count>15)return toastr.warning("按钮数至多为15"),void s();var t={count:parseInt(e.component.object.level.info.count)},i=o.SaveCurrentOperate();o.ChangeAttributeButtonCount(t,function(){e.$emit("ChangeCurrentPage",i)})}}function G(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.progressValue)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.progressValue==nn.level.info.progressValue)return;if(e.component.object.level.info.progressValue<e.component.object.level.info.minValue||e.component.object.level.info.progressValue>e.component.object.level.info.maxValue)return toastr.warning("超出范围"),void s();var t={progressValue:e.component.object.level.info.progressValue};o.ChangeAttributeProgressValue(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function E(){var n=o.getCurrentSelectObject(),t=null,r=null,l=null;if(n.type==i.MyProgress){t=e.component.progress.cursor,r=e.component.progress.progressModeId,l=e.component.progress.thresholdModeId;var a=o.SaveCurrentOperate(),c={cursor:t,progressModeId:r,thresholdModeId:l};o.ChangeAttributeCursor(c,function(){e.$emit("ChangeCurrentPage",a)})}}function X(n){var t=e.component.progress.thresholdModeId;e.component.progress.threshold2=null;var i={thresholdModeId:t},r=o.SaveCurrentOperate();o.ChangeAttributeProgressThreshold(i,function(){e.$emit("ChangeCurrentPage",r)})}function Y(n){if(13==n.keyCode){if(e.component.object.level.info.threshold1==nn.level.info.threshold1)return;if(e.component.object.level.info.threshold1<e.component.object.level.info.minValue||e.component.object.level.info.threshold1>e.component.object.level.info.maxValue)return toastr.warning("超出范围"),void s();if(e.component.object.level.info.threshold2&&e.component.object.level.info.threshold1>e.component.object.level.info.threshold2)return toastr.warning("超出范围"),void s();var t={threshold1:e.component.object.level.info.threshold1},i=o.SaveCurrentOperate();o.ChangeAttributeProgressThreshold(t,function(){e.$emit("ChangeCurrentPage",i)})}}function Z(n){if(13==n.keyCode){if(e.component.object.level.info.threshold2==nn.level.info.threshold2)return;if(e.component.object.level.info.threshold2<e.component.object.level.info.minValue||e.component.object.level.info.threshold2>e.component.object.level.info.maxValue)return toastr.warning("超出范围"),void s();if(e.component.object.level.info.threshold1&&e.component.object.level.info.threshold2<e.component.object.level.info.threshold1)return toastr.warning("超出范围"),void s();var t={threshold2:e.component.object.level.info.threshold2},i=o.SaveCurrentOperate();o.ChangeAttributeProgressThreshold(t,function(){e.$emit("ChangeCurrentPage",i)})}}function U(){var n=o.getCurrentSelectObject(),t=null;if(n.type==i.MyProgress)t=e.component.progress.arrangeModel;else if(n.type==i.MyButtonGroup)t=e.component.buttonGroup.arrangeModel;else if(n.type==i.MySlideBlock)t=e.component.slideBlock.arrangeModel;else if(n.type==i.MyNum)t=e.component.num.arrangeModel;else if(n.type==i.MyTextArea)t=e.component.textArea.arrangeModel;else if(n.type==i.MyButton)t=e.component.button.arrangeModel;else if(n.type=i.MyDateTime)t=e.component.dateTime.arrangeModel;else{if(!(n.type=i.MyTexTime))return;t=e.component.texTime.arrangeModel}var r=o.SaveCurrentOperate(),l={arrange:t};o.ChangeAttributeArrange(l,function(){e.$emit("ChangeCurrentPage",r)})}function K(n){if(13==n.keyCode){if(!_.isInteger(Number(e.component.object.level.info.offsetValue)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.offsetValue<-360||e.component.object.level.info.offsetValue>360)return toastr.warning("超出最小最大角度范围"),void s();if(e.component.object.level.info.offsetValue==nn.level.info.offsetValue)return;var t={offsetValue:e.component.object.level.info.offsetValue},i=o.SaveCurrentOperate();o.ChangeAttributeDashboardOffsetValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function Q(n){if(13==n.keyCode){if(!_.isNumber(e.component.object.level.info.value))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.value==nn.level.info.value)return;if(e.component.object.level.info.value<e.component.object.level.info.minValue||e.component.object.level.info.value>e.component.object.level.info.maxValue)return toastr.warning("超出范围"),void s();var t={value:e.component.object.level.info.value},i=o.SaveCurrentOperate();o.ChangeAttributeDashboardValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function q(n){if(13==n.keyCode){var t=e.component.object.level.info.pointerLength,i=e.component.object.level.info.width,r=i/Math.SQRT2+10;if(!_.isInteger(Number(t)))return toastr.warning("输入不合法"),void s();if(t<0||t>r)return toastr.warning("指针长度超出范围"),void s();if(t==nn.level.info.pointerLength)return;var l={pointerLength:t},a=o.SaveCurrentOperate();o.ChangeAttributeDashboardPointerLength(l,function(){e.$emit("ChangeCurrentPage",a)})}}function J(n){var t=o.getCurrentSelectObject(),r=null;if(t.type==i.MyDashboard){r=e.component.dashboard.dashboardModeId;var l=o.SaveCurrentOperate(),a={dashboardModeId:r};o.ChangeAttributeDashboardModeId(a,function(){e.$emit("ChangeCurrentPage",l)})}}function ee(n){var t=o.getCurrentSelectObject(),r=null;if(t.type==i.MyDashboard){r=e.component.dashboard.clockwise;var l=o.SaveCurrentOperate(),a={clockwise:r};o.ChangeAttributeDashboardClockwise(a,function(){e.$emit("ChangeCurrentPage",l)})}}function ne(n){if(13==n.keyCode){if(!_.isInteger(e.component.object.level.info.minCoverAngle))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.minCoverAngle<-360||e.component.object.level.info.minCoverAngle>360||e.component.object.level.info.minCoverAngle>e.component.object.level.info.maxCoverAngle||e.component.object.level.info.maxCoverAngle-e.component.object.level.info.minCoverAngle>360)return toastr.warning("超出范围"),void s();var t={minCoverAngle:e.component.object.level.info.minCoverAngle},i=o.SaveCurrentOperate();o.ChangeAttributeDashboardCoverAngle(t,function(){e.$emit("ChangeCurrentPage",i)})}}function te(n){if(13==n.keyCode){if(!_.isInteger(e.component.object.level.info.maxCoverAngle))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.maxCoverAngle<-360||e.component.object.level.info.maxCoverAngle>360||e.component.object.level.info.maxCoverAngle<e.component.object.level.info.minCoverAngle||e.component.object.level.info.maxCoverAngle-e.component.object.level.info.minCoverAngle>360)return toastr.warning("超出范围"),void s();var t={maxCoverAngle:e.component.object.level.info.maxCoverAngle},i=o.SaveCurrentOperate();o.ChangeAttributeDashboardCoverAngle(t,function(){e.$emit("ChangeCurrentPage",i)})}}function oe(n){if(13==n.keyCode){if(!_.isInteger(e.component.object.level.info.minValue))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.minValue<1-Math.pow(10,9))return toastr.warning("小于最小临界值"),void s();if(e.component.object.level.info.minValue==nn.level.info.minValue)return;if(e.component.object.level.info.maxValue<=e.component.object.level.info.minValue)return toastr.warning("不能比最大值大"),void s();if(e.component.object.level.type==i.MyProgress){if(e.component.object.level.info.minValue>e.component.object.level.info.progressValue)return toastr.warning("不能比当前值大"),void s()}else if(e.component.object.level.type==i.MyDashboard){if(e.component.object.level.info.minValue>e.component.object.level.info.value)return toastr.warning("不能比当前值大"),void s()}else if(e.component.object.level.type==i.MyNum||e.component.object.level.type==i.MyTexNum){if(e.component.object.level.info.minValue>e.component.object.level.info.initValue)return toastr.warning("不能比当前值大"),void s()}else if(e.component.object.level.type==i.MySlideBlock){if(e.component.object.level.info.minValue>e.component.object.level.info.initValue)return toastr.warning("不能比初始值大"),void s()}else if(e.component.object.level.type==i.MyRotateImg&&e.component.object.level.info.minValue<0)return toastr.warning("不能小于0"),void s();var t={minValue:e.component.object.level.info.minValue},r=o.SaveCurrentOperate();o.ChangeAttributeValue(t,function(){e.$emit("ChangeCurrentPage",r)})}}function ie(n){if(13==n.keyCode){var t=e.component.object.level.info.maxValue,r=e.component.object.level.type;if(!_.isInteger(parseInt(t)))return toastr.warning("输入不合法"),void s();if(t>Math.pow(10,9)-1)return toastr.warning("超过最大临界值"),void s();if(t===nn.level.info.maxValue)return;if(t<=e.component.object.level.info.minValue)return toastr.warning("不能比最小值小"),void s();if(r===i.MyProgress){if(t<e.component.object.level.info.progressValue)return toastr.warning("不能比当前值小"),void s()}else if(r===i.MyNum||r==i.MyTexNum){if(t<e.component.object.level.info.numValue)return toastr.warning("不能比当前值小"),void s();var l=e.component.object.level.info.numOfDigits,a=Math.pow(10,l)-1;if(t>a)return toastr.warning("超出范围"),void s()}else if(r===i.MySlideBlock){if(t<e.component.object.level.info.initValue)return toastr.warning("不能比初始值小"),void s()}else if(r===i.MyRotateImg&&t>360)return toastr.warning("不能超过360"),void s();var c={maxValue:t},u=o.SaveCurrentOperate();o.ChangeAttributeValue(c,function(){e.$emit("ChangeCurrentPage",u)})}}function re(n){if(13==n.keyCode){if(!_.isInteger(Number(e.component.object.level.info.minAngle)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.minAngle<-360||e.component.object.level.info.minAngle>360)return toastr.warning("最小角度应在-360到360之间"),void s()
;if(e.component.object.level.info.minAngle==nn.level.info.minAngle)return;var t={minAngle:e.component.object.level.info.minAngle},i=o.SaveCurrentOperate();o.ChangeAttributeValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function le(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.maxAngle)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.maxAngle>360||e.component.object.level.info.maxAngle<e.component.object.level.info.minAngle)return toastr.warning("最大角度不能大于360且不小于最小角"),void s();if(e.component.object.level.info.maxAngle==nn.level.info.maxAngle)return;var t={maxAngle:e.component.object.level.info.maxAngle},i=o.SaveCurrentOperate();o.ChangeAttributeValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function ae(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.lowAlarmValue)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.lowAlarmValue<1-Math.pow(10,9))return toastr.warning("小于最小临界值"),void s();if(e.component.object.level.info.lowAlarmValue==nn.level.info.lowAlarmValue)return;var t={lowAlarmValue:e.component.object.level.info.lowAlarmValue},i=o.SaveCurrentOperate();o.ChangeAttributeValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function ce(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.highAlarmValue)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.highAlarmValue>Math.pow(10,9)-1)return toastr.warning("大于最大临界值"),void s();if(e.component.object.level.info.highAlarmValue==nn.level.info.highAlarmValue)return;var t={highAlarmValue:e.component.object.level.info.highAlarmValue},i=o.SaveCurrentOperate();o.ChangeAttributeValue(t,function(){e.$emit("ChangeCurrentPage",i)})}}function ue(n){if(13==n.keyCode){var t=e.component.object.level.info.spacing,i=e.component.object.level.info.fontSize;if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t===nn.level.info.spacing)return;if(t<-i||t>i)return toastr.warning("超出范围"),void s();var r={spacing:t},l=o.SaveCurrentOperate();switch(e.component.object.type,e.component.object.type){case"MyNum":o.ChangeAttributeNumContent(r,function(){e.$emit("ChangeCurrentPage",l)});break;case"MyDateTime":console.log("MyDateTimeEnterSpacing"),o.ChangeAttributeOfDateTime(r,function(){e.$emit("ChangeCurrentPage",l)});break;default:console.log("error!")}}}function me(n){var t=o.getCurrentSelectObject(),r=null;if(t.type==i.MyButton){r=e.component.button.buttonModeId;var l=o.SaveCurrentOperate(),a={buttonModeId:r};o.ChangeAttributeButtonModeId(a,function(){e.$emit("ChangeCurrentPage",l)})}}function fe(n){if(13==n.keyCode){if(e.component.object.level.info.text==nn.level.info.text)return;var t={text:e.component.object.level.info.text},i=o.SaveCurrentOperate();o.ChangeAttributeTextContent(t,function(){e.$emit("ChangeCurrentPage",i)})}}function ge(n){var t=a.selectCharacterByIndex(n);if(t){e.component.object.level.info.fontName=t.fontName,e.component.object.level.info.fontFamily=t.fontFamily,e.component.object.level.info.fontSize=t.fontSize,e.component.object.level.info.fontColor=t.fontColor,e.component.object.level.info.fontBold=t.fontBold,e.component.object.level.info.fontItalic=t.fontItalic,e.component.object.level.info.boldBtnToggle=t.boldBtnToggle,e.component.object.level.info.italicBtnToggle=t.italicBtnToggle;var i={text:e.component.object.level.info.text,fontName:e.component.object.level.info.fontName,fontFamily:e.component.object.level.info.fontFamily,fontSize:e.component.object.level.info.fontSize,fontColor:e.component.object.level.info.fontColor,fontBold:e.component.object.level.info.fontBold,fontItalic:e.component.object.level.info.fontItalic,boldBtnToggle:e.component.object.level.info.boldBtnToggle,italicBtnToggle:e.component.object.level.info.italicBtnToggle};o.ChangeAttributeTextContent(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function ve(n){if(o.getCurrentSelectObject().type==i.MyTextArea){var t=a.selectCharacterByName(n);if(t){e.component.object.level.info.fontName=t.fontName,e.component.object.level.info.fontFamily=t.fontFamily,e.component.object.level.info.fontSize=t.fontSize,e.component.object.level.info.fontColor=t.fontColor,e.component.object.level.info.fontBold=t.fontBold,e.component.object.level.info.fontItalic=t.fontItalic,e.component.object.level.info.boldBtnToggle=t.boldBtnToggle,e.component.object.level.info.italicBtnToggle=t.italicBtnToggle;var r={text:e.component.object.level.info.text,fontName:e.component.object.level.info.fontName,fontFamily:e.component.object.level.info.fontFamily,fontSize:e.component.object.level.info.fontSize,fontColor:e.component.object.level.info.fontColor,fontBold:e.component.object.level.info.fontBold,fontItalic:e.component.object.level.info.fontItalic,boldBtnToggle:e.component.object.level.info.boldBtnToggle,italicBtnToggle:e.component.object.level.info.italicBtnToggle};o.ChangeAttributeTextContent(r,function(n){e.$emit("ChangeCurrentPage",n)})}}}function de(n){var t={fontName:"自定义",text:"自定义",fontFamily:_.cloneDeep(e.component.object.level.info.fontFamily),fontSize:_.cloneDeep(e.component.object.level.info.fontSize),fontColor:_.cloneDeep(e.component.object.level.info.fontColor),fontBold:_.cloneDeep(e.component.object.level.info.fontBold),fontItalic:_.cloneDeep(e.component.object.level.info.fontItalic),boldBtnToggle:_.cloneDeep(e.component.object.level.info.boldBtnToggle),italicBtnToggle:_.cloneDeep(e.component.object.level.info.italicBtnToggle)};a.addCharacterSet(t),n.stopPropagation()}function se(e,n){a.deleteCharacterSetByIndex(n),e.stopPropagation()}function be(n){if(13==n.keyCode){var t=e.component.object.level.type;if(e.component.object.level.info.numOfDigits.toString().indexOf(".")>-1)return void s();if(e.component.object.level.info.numOfDigits==nn.level.info.numOfDigits)return;if(e.component.object.level.info.numOfDigits<1||e.component.object.level.info.numOfDigits>10)return s(),void toastr.warning("超出范围");var r=e.component.object.level.info.numValue.toString().length+e.component.object.level.info.decimalCount;if(e.component.object.level.info.numOfDigits<=e.component.object.level.info.decimalCount||e.component.object.level.info.numOfDigits<r)return s(),void toastr.warning("超出范围");var l={numOfDigits:e.component.object.level.info.numOfDigits};switch(t){case i.MyNum:o.ChangeAttributeNumContent(l,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(l,function(n){e.$emit("ChangeCurrentPage",n)})}}}function pe(n){if(13==n.keyCode){var t=e.component.object.level.type;if(e.component.object.level.info.decimalCount.toString().indexOf(".")>-1)return void s();if(e.component.object.level.info.decimalCount==nn.level.info.decimalCount)return;if(e.component.object.level.info.decimalCount<0||e.component.object.level.info.decimalCount>=e.component.object.level.info.numOfDigits)return s(),void toastr.warning("超出范围");var r={decimalCount:e.component.object.level.info.decimalCount};o.SaveCurrentOperate();switch(t){case i.MyNum:o.ChangeAttributeNumContent(r,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(r,function(n){e.$emit("ChangeCurrentPage",n)})}}}function he(){var n=o.getCurrentSelectObject(),t=null;if(n.type==i.MyNum){t=e.component.num.numModeId;var r={numModeId:t};o.SaveCurrentOperate();o.ChangeAttributeOfNum(r,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ce(){var n=o.getCurrentSelectObject(),t=n.type,r={};o.SaveCurrentOperate();switch(t){case i.MyNum:r.symbolMode=e.component.num.symbolMode,o.ChangeAttributeNumContent(r,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:r.symbolMode=e.component.texNum.symbolMode,o.ChangeAttributeTexNumContent(r,function(n){e.$emit("ChangeCurrentPage",n)})}}function je(){var n=o.getCurrentSelectObject(),t={};o.SaveCurrentOperate();switch(n.type){case i.MyNum:t.frontZeroMode=e.component.num.frontZeroMode,o.ChangeAttributeNumContent(t,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:t.frontZeroMode=e.component.texNum.frontZeroMode,o.ChangeAttributeTexNumContent(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function ye(){var n=o.getCurrentSelectObject(),t={};o.SaveCurrentOperate();switch(n.type){case i.MyNum:t.overFlowStyle=e.component.num.overFlowStyle,o.ChangeAttributeOfNum(t,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:t.overFlowStyle=e.component.texNum.overFlowStyle,o.ChangeAttributeOfTexNum(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Me(n){if(13==n.keyCode){var t=e.component.object.level.type,r=e.component.object.level.info.numValue,l=e.component.object.level.info.minValue,a=e.component.object.level.info.maxValue,c=r.toString();if(r==nn.level.info.numValue)return;if(r<l||r>a||isNaN(r)||-1!=c.indexOf("."))return toastr.warning("输入不合法"),void s();var u={numValue:r};switch(t){case i.MyNum:o.ChangeAttributeNumContent(u,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(u,function(n){e.$emit("ChangeCurrentPage",n)})}}}function Ae(){var n=e.component.object.level.type;if(e.component.object.level.info.align!=nn.level.info.align){var t={align:e.component.object.level.info.align};switch(n){case i.MyNum:o.ChangeAttributeNumContent(t,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(t,function(n){e.$emit("ChangeCurrentPage",n)})}}}function Se(n){if(13===n.keyCode){var t=e.component.object.level.info.characterW,r=e.component.object.level.type;if(!_.isInteger(t)||t<=0)return void toastr.warning("输入不合法");if(t<1||t>2e3)return void toastr.warning("超出范围");var l={characterW:t};switch(r){case i.MyTexTime:o.ChangeAttributeTexTimeContent(l,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(l,function(n){e.$emit("ChangeCurrentPage",n)})}}}function Ie(n){if(13===n.keyCode){var t=e.component.object.level.info.characterH,r=e.component.object.level.type;if(!_.isInteger(t)||t<=0)return void toastr.warning("输入不合法");if(t<1||t>2e3)return void toastr.warning("超出范围");var l={characterH:t};switch(r){case i.MyTexTime:o.ChangeAttributeTexTimeContent(l,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyTexNum:o.ChangeAttributeTexNumContent(l,function(n){e.$emit("ChangeCurrentPage",n)})}}}function we(n){Ve({type:"left",value:e.component.object.level.info.left})}function Te(n){xe({type:"top",value:e.component.object.level.info.top+e.component.object.level.info.itemShowCount*e.component.object.level.info.itemHeight})}function ke(n){if(13===n.keyCode){var t=e.component.object.level.info.selectorWidth,i=Number(e.component.object.level.info.itemWidth);if(!_.isInteger(i))return toastr.warning("输入不合法"),void s();if(i<0||i>t)return toastr.warning("超出范围"),void s();if(i==nn.level.info.itemWidth)return;var r={itemWidth:i};o.ChangeAttributeOfSelector(r,function(n){e.$emit("ChangeCurrentPage",n)})}}function Fe(n){if(13===n.keyCode){var t=Number(e.component.object.level.info.itemHeight);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||t>500)return toastr.warning("超出范围"),void s();if(t==nn.level.info.itemHeight)return;toastr.info("修改成功");y({type:"selector",value:e.component.object.level.info.selectorTop-e.component.object.level.info.itemShowCount*t});var i={itemHeight:t};o.ChangeAttributeOfSelector(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ne(n){if(13===n.keyCode){var t=Number(e.component.object.level.info.selectorWidth);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||t>500)return toastr.warning("超出范围"),void s();if(t==nn.level.info.selectorWidth)return;toastr.info("修改成功");var i={selectorWidth:t};o.ChangeAttributeOfSelector(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function Pe(n){if(13===n.keyCode){var t=Number(e.component.object.level.info.selectorHeight);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||t>500)return toastr.warning("超出范围"),void s();if(t==nn.level.info.selectorHeight)return;var i={selectorHeight:t};toastr.info("修改成功"),o.ChangeAttributeOfSelector(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ve(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.selectorLeft);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<-2e3||t>2e3)return toastr.warning("超出画布范围"),void s();if(t==nn.level.info.selectorLeft)return;toastr.info("修改成功");j({type:"selector",value:t});var i={selectorLeft:t};o.ChangeAttrOfSelectorNoRender(i,function(n){e.$emit("ChangeCurrentPage",n)})}else if("left"===n.type){var t=n.value;e.component.object.level.info.selectorLeft=t;var i={selectorLeft:t};o.ChangeAttrOfSelectorNoRender(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function xe(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.selectorTop);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<-2e3||t>2e3)return toastr.warning("超出画布范围"),void s();if(t==nn.level.info.selectorTop)return;toastr.info("修改成功");y({type:"selector",value:t-e.component.object.level.info.itemHeight*e.component.object.level.info.itemShowCount});var i={selectorTop:t};o.ChangeAttrOfSelectorNoRender(i,function(n){e.$emit("ChangeCurrentPage",n)})}else if("top"===n.type){var t=n.value;e.component.object.level.info.selectorTop=t;var i={selectorTop:t};o.ChangeAttrOfSelectorNoRender(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function Oe(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.itemCount);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||t>100)return toastr.warning("超出范围"),void s();if(t==nn.level.info.itemCount)return;var i=e.component.object.level.texList[1].slices,r=e.component.object.level.texList[2].slices,l=i.length;if(t<l)for(var a=l-t;a>0;a--)i.pop(),r.pop();else{if(!(t>l))return void toastr.info("error");for(var c={color:"rgba(0,0,0,0)",imgSrc:"",text:"",name:"0"},u=l;u<t;u++){c.name=u.toString();var m=_.cloneDeep(c);i.push(m),r.push(m)}}toastr.info("修改成功");var f={itemCount:t,sliceList1:i,sliceList2:r};o.ChangeAttributeOfSelector(f,function(n){e.$emit("ChangeCurrentPage",n)})}}function $e(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.curValue);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||t>=e.component.object.level.info.itemCount)return toastr.warning("超出范围"),void s();if(t==nn.level.info.curValue)return;toastr.info("修改成功");var i={curValue:t};o.ChangeAttributeOfSelector(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function Be(n){if(13==n.keyCode){var t=Number(e.component.object.level.info.itemShowCount),i=Number(e.component.object.level.info.itemHeight),r=Number(e.component.object.level.info.selectorTop),l=Number(e.component.object.level.info.itemCount);if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<0||(t-1)*i+r>2e3||t>l)return toastr.warning("超出范围"),void s();if(t==nn.level.info.itemShowCount)return;toastr.info("修改成功");y({type:"selector",value:e.component.object.level.info.selectorTop-e.component.object.level.info.itemHeight*t});var a={itemShowCount:t};o.ChangeAttributeOfSelector(a,function(n){e.$emit("ChangeCurrentPage",n)})}}function De(n){if(13==n.keyCode){var t=e.component.object.level.info.selectorTitle;if(t=t.toString(),nn.level.info.selectorTitle&&t==nn.level.info.selectorTitle)return;toastr.info("修改成功");var i={selectorTitle:t};o.ChangeAttributeOfSelector(i,function(n){e.$emit("ChangeCurrentPage",n)})}}function _e(n){if(13==n.keyCode){var t=e.component.object.level.info.curValue,i=e.component.object.level.info.minValue,r=e.component.object.level.info.maxValue;if(t==nn.level.info.curValue)return;if(!_.isInteger(t))return toastr.warning("输入不合法"),void s();if(t<i||t>r||isNaN(t))return toastr.warning("输入不合法"),void s();var l={curValue:t};o.ChangeAttributeOfRotaryKnob(l,function(n){e.$emit("ChangeCurrentPage",n)})}}function Le(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.knobSize)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.knobSize==nn.level.info.knobSize)return;var t={knobSize:e.component.object.level.info.knobSize};o.ChangeAttributeKnobSize(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function ze(n){if(13==n.keyCode){if(!_.isInteger(parseInt(e.component.object.level.info.value)))return toastr.warning("输入不合法"),void s();if(e.component.object.level.info.value==nn.level.info.value)return;if(e.component.object.level.info.value<e.component.object.level.info.minValue||e.component.object.level.info.value>e.component.object.level.info.maxValue)return toastr.warning("超出范围"),void s();var t={value:e.component.object.level.info.value};o.ChangeAttributeKnobValue(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function He(n){if(13==n.keyCode){if(e.component.object.level.info.spacing==nn.level.info.spacing)return;(e.component.object.level.info.spacing<=0||e.component.object.level.info.spacing>e.component.object.level.info.width)&&toastr.warning("超出范围");var t={spacing:e.component.object.level.info.spacing};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Re(n){if(13==n.keyCode){if(e.component.object.level.info.lineWidth==nn.level.info.lineWidth)return;(e.component.object.level.info.lineWidth<=0||e.component.object.level.info.lineWidth>e.component.object.level.info.spacing/2)&&toastr.warning("超出范围");var t={lineWidth:e.component.object.level.info.lineWidth};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function We(n){if(13==n.keyCode){if(e.component.object.level.info.gridInitValue==nn.level.info.gridInitValue)return;var t={gridInitValue:e.component.object.level.info.gridInitValue};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ge(n){if(13==n.keyCode){if(e.component.object.level.info.gridUnitX==nn.level.info.gridUnitX)return;var t={gridUnitX:e.component.object.level.info.gridUnitX};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ee(n){if(13==n.keyCode){if(e.component.object.level.info.gridUnitY==nn.level.info.gridUnitY)return;var t={gridUnitY:e.component.object.level.info.gridUnitY};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Xe(){if(e.component.object.level.info.grid!=nn.level.info.grid){var n={grid:e.component.object.level.info.grid};o.SaveCurrentOperate();o.ChangeAttributeOscilloscopeForRender(n,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ye(n){if(13==n.keyCode){if(e.component.object.level.info.bindBit==nn.level.info.bindBit)return;if(e.component.object.level.info.bindBit<0||e.component.object.level.info.bindBit>31)return toastr.warning("超出范围"),void s();toastr.info("修改成功");var t={bindBit:e.component.object.level.info.bindBit};o.SaveCurrentOperate();o.ChangeAttributeBindBit(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ze(n){if(13==n.keyCode){if(e.component.object.level.info.initValue==nn.level.info.initValue)return;if(e.component.object.level.info.initValue<e.component.object.level.info.minValue||e.component.object.level.info.initValue>e.component.object.level.info.maxValue)return toastr.warning("超出最大或最小范围"),void s();var t={initValue:e.component.object.level.info.initValue};o.SaveCurrentOperate();o.ChangeAttributeInitValue(t,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ue(n){var t=o.getCurrentSelectObject(),r=null,l=null;if(t.type==i.MyDateTime)r=e.component.dateTime.dateTimeModeId,l=e.component.dateTime.RTCModeId;else{if(t.type!=i.MyTexTime)return;r=e.component.texTime.dateTimeModeId,l=e.component.texTime.RTCModeId}var a=(o.SaveCurrentOperate(),{dateTimeModeId:r,RTCModeId:l});switch(t.type){case i.MyTexTime:o.ChangeAttributeTexTimeModeId(a,function(n){e.$emit("ChangeCurrentPage",n)});break;case i.MyDateTime:o.ChangeAttributeDateTimeModeId(a,function(n){e.$emit("ChangeCurrentPage",n)})}}function Ke(){var n={align:e.component.group.alignModeId};o.ChangeAttributeGroupAlign(n)}function Qe(n){var t=e.component.video.sourceId,i={source:t};o.SaveCurrentOperate();o.changeVideoSource(i,function(n){e.$emit("ChangeCurrentPage",n)})}function qe(n){var t=e.component.video.scaleId,i={scale:t};o.SaveCurrentOperate();o.changeVideoScale(i,function(n){e.$emit("ChangeCurrentPage",n)})}function Je(n){var t={},i=e.component.subLayer.scrollVEnabled,r=e.component.subLayer.scrollHEnabled;"v"===n?t.scrollVEnabled="0"!==i:"h"===n&&(t.scrollHEnabled="0"!==r),o.SaveCurrentOperate(),o.ChangeSubLayerScroll(t,function(n){e.$emit("ChangeCurrentPage",n)})}function en(){e.maskAttr=o.initMaskAttr()}var nn=null;e.$on("GlobalProjectReceived",function(){f(),g()}),e.$on("ToolShowChanged",function(n,t){e.component.textArea.toolShow=t}),e.maskRestore=en,function(){e.$on("MaskStyle",function(n,t){e.maskAttr=_.cloneDeep(t),o.saveMaskInfo(e.maskAttr)}),e.$on("MaskView",function(n,t){e.myMask=t})}(),e.enterMaskAttr=function(n,t){var o=null,i=e.maskAttr;if(13!=n.keyCode)return!1;switch(t){case"name":var r=e.maskAttr.name;if(!(r.match(/\S/)&&r.length<10))return toastr.warning("不能为空或长度超范围"),en(),!1;e.maskAttr.name=r.replace(/(^\s*)|(\s*$)/g,""),o=i,toastr.info("修改成功");break;case"left":var l=Number(e.maskAttr.left);if(!(-2e3<l&&l<2e3))return toastr.warning("超出范围"),en(),!1;o=i,toastr.info("修改成功");break;case"top":var a=Number(e.maskAttr.top);if(!(-2e3<a&&a<2e3))return toastr.warning("超出范围"),en(),!1;o=i,toastr.info("修改成功");break;case"width":var c=Number(e.maskAttr.width);if(!(-2e3<c&&c<2e3))return toastr.warning("超出范围"),en(),!1;o=i,toastr.info("修改成功");break;case"height":var u=Number(e.maskAttr.height);if(!(-2e3<u&&u<2e3))return toastr.warning("超出范围"),en(),!1;o=i,toastr.info("修改成功")}e.$emit("ChangeMaskAttr",o)}}]);