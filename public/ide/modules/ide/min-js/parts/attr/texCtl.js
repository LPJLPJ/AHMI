ide.controller("TexCtl",["$scope","$uibModal","ProjectService","Type","TexService",function(e,t,i,n,a){function o(){l(),e.animationsEnabled=!0}function s(){e.$on("AttributeChanged",function(){l()}),e.editTex=function(a){e.selectedIdx=a;var o=null;a==-1?o={name:"default",currentSliceIdx:0,slices:[]}:(e.widgetType==n.MyButton&&(e.texList[a].slices[2]||(e.texList[a].slices[2]={color:"rgba(244,244,244,0.3)",imgSrc:"",name:"高亮"})),o=_.cloneDeep(e.texList[a]));var s=t.open({animation:e.animationsEnabled,templateUrl:"imageSelectorModal.html",controller:"ImageSelectorInstanceCtl",size:"lg",resolve:{widgetInfo:{name:e.widgetName,type:e.widgetType,tex:o}}});s.result.then(function(t){e.selectedIdx==-1?e.texList.push(t):e.selectedIdx>=0&&e.selectedIdx<e.texList.length&&(e.texList[e.selectedIdx]=t);var n=i.SaveCurrentOperate();i.ChangeAttributeTexList(_.cloneDeep(e.texList),function(){e.$emit("ChangeCurrentPage",n)})},function(){})},e.configWidgetSize=function(){if(""!=e.texList[0].slices[0].imgSrc){var t=i.SaveCurrentOperate();i.ChangeAttributeWidgetSize(function(){e.$emit("ChangeCurrentPage",t)})}}}function l(){var t=_.cloneDeep(i.getCurrentSelectObject().level);if(t){if(n.isWidget(t.type))switch(t.type){case"MyVideo":case"MyNum":e.showTexPanel=!1,e.showSizeButtion=!1;break;case"MySwitch":e.showTexPanel=!0,e.showSizeButtion=!0;break;default:e.showTexPanel=!0,e.showSizeButtion=!1}else e.showTexPanel=!1,e.showSizeButtion=!1;if(e.widgetName=t.name,e.widgetType=t.type,t.texList&&t.texList.length)e.texList=t.texList;else{e.texList=a.getDefaultWidget(e.widgetType);var o=i.SaveCurrentOperate();i.ChangeAttributeTexList(_.cloneDeep(e.texList),function(){e.$emit("ChangeCurrentPage",o)})}return t}}e.$on("GlobalProjectReceived",function(){o(),s()})}]);