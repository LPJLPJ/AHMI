ide.controller("TexCtl",["$scope","$uibModal","ProjectService","Type","TexService",function(e,t,i,n,o){function a(){c(),e.animationsEnabled=!0}function s(){e.$on("AttributeChanged",function(){c()}),e.editTex=function(o){e.selectedIdx=o;var a=null,s=null;-1===o?a={name:"default",currentSliceIdx:0,slices:[]}:(e.widgetType===n.MyButton&&(e.texList[o].slices[2]||(e.texList[o].slices[2]={color:"rgba(244,244,244,0.3)",imgSrc:"",name:"高亮"})),a=_.cloneDeep(e.texList[o]),s=_.cloneDeep(e.objInfo)),t.open({animation:e.animationsEnabled,templateUrl:"imageSelectorModal.html",controller:"ImageSelectorInstanceCtl",size:"lg",resolve:{widgetInfo:{name:e.widgetName,type:e.widgetType,tex:a,index:o,objInfo:s}}}).result.then(function(t){-1==e.selectedIdx?e.texList.push(t):e.selectedIdx>=0&&e.selectedIdx<e.texList.length&&(e.texList[e.selectedIdx]=t);var n=i.SaveCurrentOperate();i.ChangeAttributeTexList(_.cloneDeep(e.texList),function(){e.$emit("ChangeCurrentPage",n)})},function(){})},e.configWidgetSize=function(){if(""!=e.texList[0].slices[0].imgSrc){var t=i.SaveCurrentOperate();i.ChangeAttributeWidgetSize(function(){e.$emit("ChangeCurrentPage",t)})}}}function c(){var t=_.cloneDeep(i.getCurrentSelectObject().level);if(!t)return void console.warn("空!");if(n.isWidget(t.type))switch(t.type){case"MyVideo":case"MyScriptTrigger":case"MyNum":e.showTexPanel=!1,e.showSizeButtion=!1;break;case"MySwitch":e.showTexPanel=!0,e.showSizeButtion=!0;break;default:e.showTexPanel=!0,e.showSizeButtion=!1}else e.showTexPanel=!1,e.showSizeButtion=!1;if(e.widgetName=t.name,e.widgetType=t.type,t.texList&&t.texList.length)e.texList=t.texList,e.objInfo=t.info;else{e.texList=o.getDefaultWidget(e.widgetType);var a=i.SaveCurrentOperate();i.ChangeAttributeTexList(_.cloneDeep(e.texList),function(){e.$emit("ChangeCurrentPage",a)})}return t}e.$on("GlobalProjectReceived",function(){a(),s()}),e.$on("MaskView",function(t,i){e.myMask=i})}]);