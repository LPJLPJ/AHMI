ide.controller("animationCtl",["$scope","ProjectService","Type","$uibModal","AnimationService","UserTypeService",function(n,t,e,i,o,a){function l(){s(),c(),n.status={collapsed:!1},n.collapse=function(t){n.status.collapsed=!n.status.collapsed}}function c(){var n=a.getAnimationAuthor();document.getElementById("addAnimationBtn").disabled=n}function s(){if(!t.getCurrentSelectObject())return void console.warn("ç©º");var e=t.getCurrentSelectObject().level,i=_.cloneDeep(e.animations);switch(o.setAnimations(i),n.animations=o.getAllAnimations(),t.getCurrentSelectObject().level.type){case"MyLayer":n.showAnimationPanel=!0;break;default:n.showAnimationPanel=!1}}function m(){n.$on("AttributeChanged",function(){s()}),n.deleteAnimation=function(t){o.deleteAnimationByIndex(t,function(){n.animations=o.getAllAnimations()}.bind(this))},n.openPanel=function(t){n.selectIdx=t;var e;-1==t?e=o.getNewAnimation():t>=0&&t<n.animations.length&&(e=_.cloneDeep(n.animations[t])),i.open({animation:!0,templateUrl:"animationPanelModal.html",controller:"AnimationInstanceCtrl",size:"middle",resolve:{animation:function(){return e}}}).result.then(function(t){-1==n.selectIdx?o.appendAnimation(t,function(){n.animations=o.getAllAnimations()}.bind(this)):n.selectIdx>=0&&n.selectIdx<n.animations.length&&o.updateAnimationByIndex(t,n.selectIdx,function(){n.animations=o.getAllAnimations()}.bind(this))})}}n.$on("GlobalProjectReceived",function(){l(),m()})}]).controller("AnimationInstanceCtrl",["$scope","$uibModalInstance","animation",function(n,t,e){n.animation=e,n.confirm=function(){t.close(n.animation)},n.cancel=function(){t.dismiss()}}]);