ide.controller("animationCtl",["$scope","ProjectService","Type","$uibModal","AnimationService","UserTypeService",function(n,t,i,e,o,a){function l(){s(),c(),n.status={collapsed:!1},n.collapse=function(t){n.status.collapsed=!n.status.collapsed}}function c(){var n=a.getAnimationAuthor();document.getElementById("addAnimationBtn").disabled=n}function s(){if(!t.getCurrentSelectObject())return void console.warn("空");var i=t.getCurrentSelectObject().level,e=_.cloneDeep(i.animations);switch(o.setAnimations(e),n.animations=o.getAllAnimations(),t.getCurrentSelectObject().level.type){case"MyLayer":n.showAnimationPanel=!0;break;default:n.showAnimationPanel=!1}}function r(){n.$on("AttributeChanged",function(){s()}),n.deleteAnimation=function(t){o.deleteAnimationByIndex(t,function(){n.animations=o.getAllAnimations()}.bind(this))},n.openPanel=function(t){n.selectIdx=t;var i;-1==t?i=o.getNewAnimation():t>=0&&t<n.animations.length&&(i=_.cloneDeep(n.animations[t])),e.open({animation:!0,templateUrl:"animationPanelModal.html",controller:"AnimationInstanceCtrl",size:"middle",resolve:{animation:function(){return i}}}).result.then(function(t){-1==n.selectIdx?o.appendAnimation(t,function(){n.animations=o.getAllAnimations()}.bind(this)):n.selectIdx>=0&&n.selectIdx<n.animations.length&&o.updateAnimationByIndex(t,n.selectIdx,function(){n.animations=o.getAllAnimations()}.bind(this))})}}n.$on("GlobalProjectReceived",function(){l(),r()})}]).controller("AnimationInstanceCtrl",["$scope","$uibModalInstance","animation",function(n,t,i){n.animation=i,n.checkDuration=function(t){n.animation.duration<0?(toastr.error("持续时间必须大于0s"),n.animation.duration=0):n.animation.duration>5e3&&(toastr.error("持续时间不能大于5s"),n.animation.duration=5e3)},n.confirm=function(){t.close(n.animation)},n.cancel=function(){t.dismiss()}}]);