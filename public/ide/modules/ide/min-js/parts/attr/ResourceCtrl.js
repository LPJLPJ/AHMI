ide.controller("ResourceCtrl",["ResourceService","$scope","$timeout","ProjectService","Type","CanvasService","$uibModal",function(e,o,t,n,c,r,l){function i(){o.component={top:{uploadingArray:[],files:[],deleteFile:s,basicUrl:"",resources:[]}},o.component.top.resources=e.getAllResource(),o.component.top.basicUrl=e.getResourceUrl(),o.component.top.maxSize=e.getMaxTotalSize(),o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.openPanel=function(e){o.resIndex=e,l.open({animation:!0,templateUrl:"deletePanelModal.html",controller:"deleteResCtrl",size:"sm",resolve:{selectedResIndex:function(){return o.resIndex}}}).result.then(function(e){s(e)})}}function s(t){for(var c=n.getRequiredResourceNames(),r=0;r<c.length;r++)if(o.component.top.files[t].src==c[r])return void toastr.warning("该资源已经被使用");var l=o.component.top.files[t].id;e.deleteFileById(l,function(){o.$emit("ResourceUpdate")}.bind(this))}o.$on("GlobalProjectReceived",function(){i()}),o.$on("ResourceChanged",function(){o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.$emit("ChangeCurrentPage")})}]).controller("deleteResCtrl",["$scope","$uibModalInstance","selectedResIndex",function(e,o,t){e.confirm=function(){o.close(t)},e.cancel=function(){o.dismiss("cancel")}}]);