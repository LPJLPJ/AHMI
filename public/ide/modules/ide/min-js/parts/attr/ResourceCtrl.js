ide.controller("ResourceCtrl",["ResourceService","$scope","$timeout","ProjectService","Type","CanvasService","$uibModal",function(e,o,t,n,c,l,i){function r(){o.component={top:{uploadingArray:[],files:[],deleteFile:s,toggleOperation:u,basicUrl:"",resources:[],showDel:!0}},o.component.top.resources=e.getAllResource(),o.component.top.basicUrl=e.getResourceUrl(),o.component.top.maxSize=e.getMaxTotalSize(),o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.openPanel=function(e){o.resIndex=e,i.open({animation:!0,templateUrl:"deletePanelModal.html",controller:"deleteResCtrl",size:"sm",resolve:{selectedResIndex:function(){return o.resIndex}}}).result.then(function(e){s(e)})}}function s(t){for(var c=n.getRequiredResourceNames(),l=0;l<c.length;l++)if(o.component.top.files[t].src==c[l])return void toastr.warning("该资源已经被使用");var i=o.component.top.files[t].id;e.deleteFileById(i,function(){o.$emit("ResourceUpdate")}.bind(this))}function u(){o.component.top.showDel=!o.component.top.showDel,console.log("keke",$("input[type='checkbox'].multi-choice")),$("input[type='checkbox'].multi-choice")&&$("input[type='checkbox'].multi-choice").attr("checked",!1)}o.$on("GlobalProjectReceived",function(){r()}),o.$on("ResourceChanged",function(){o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.$emit("ChangeCurrentPage")})}]).controller("deleteResCtrl",["$scope","$uibModalInstance","selectedResIndex",function(e,o,t){e.confirm=function(){o.close(t)},e.cancel=function(){o.dismiss("cancel")}}]);