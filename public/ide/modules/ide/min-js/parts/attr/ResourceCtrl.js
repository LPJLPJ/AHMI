ide.controller("ResourceCtrl",["ResourceService","$scope","$timeout","ProjectService","Type","CanvasService","$uibModal",function(e,o,t,n,r,c,l){function i(){}function s(){o.component={top:{uploadingArray:[],files:[],deleteFile:u,basicUrl:"",resources:[]}},o.component.top.resources=e.getAllResource(),o.component.top.basicUrl=e.getResourceUrl(),o.component.top.maxSize=e.getMaxTotalSize(),o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.openPanel=function(e){o.resIndex=e;var t=l.open({animation:!0,templateUrl:"deletePanelModal.html",controller:"deleteResCtrl",size:"sm",resolve:{selectedResIndex:function(){return o.resIndex}}});t.result.then(function(e){u(e)})}}function u(t){for(var r=n.getRequiredResourceNames(),c=0;c<r.length;c++)if(o.component.top.files[t].src==r[c])return void toastr.warning("该资源已经被使用");var l=o.component.top.files[t].id;e.deleteFileById(l,function(){o.$emit("ResourceUpdate")}.bind(this))}o.$on("GlobalProjectReceived",function(){i(),s()}),o.$on("ResourceChanged",function(){o.component.top.files=e.getAllCustomResources(),o.component.top.totalSize=e.getCurrentTotalSize(),o.$emit("ChangeCurrentPage")})}]).controller("deleteResCtrl",function(e,o,t){e.confirm=function(){o.close(t)},e.cancel=function(){o.dismiss("cancel")}});