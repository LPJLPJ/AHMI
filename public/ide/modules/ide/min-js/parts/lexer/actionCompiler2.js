!function(){"use strict";function a(e){for(var s=[],r=!0;e.length&&r;){var n,t=e[0];switch(t[0].name){case"IF":n={},n.type="IF",n.args=[],e.shift(),n.args.push(e.shift()),n.args.push(a(e)),"ELSE"===e[0][0].name&&(e.shift(),n.args.push(a(e))),e.shift(),s.push(n);break;case"WHILE":n={type:"WHILE",args:[]},e.shift(),n.args.push(e.shift()),n.args.push(a(e)),e.shift(),s.push(n);break;case"ELSE":case"END":r=!1;break;default:s.push({type:"EXP",args:[t]}),e.shift()}}return s}function e(a,e){this.label=String(a),this.cmd=e}function s(a,e){var s=n(a,e);return r(s),s}function r(a){for(var e,s={},r=0;r<a.length;r++)e=a[r],""!==e.label&&(s[e.label]=r);for(r=0;r<a.length;r++){e=a[r];var n=e.cmd;if("JUMP"===n[0].name){var t=s[n[2].value];n[2].value=t-r}}}function n(a,s){for(var r=[],n=0;n<a.length;n++){var p=a[n];switch(p.type){case"EXP":r.push(new e("",p.args[0]));break;case"IF":[].push.apply(r,t(p,s));break;case"WHILE":[].push.apply(r,u(p,s));break;default:r.push(new e("",p.args[0]))}}return r}function t(a,s){var r=[],t=a.args;2===t.length&&t.push([]);var u=t[0],p=t[2],h=t[1];if(s=s||!1){var o=u[0].name,c=i[o];c&&(u[0].name=c,p=t[1],h=t[2])}r.push(new e("",u));var w=l;l+=1,r.push(new e("",[v,g,{tag:"",value:w}])),[].push.apply(r,n(h,s));var m=l;l+=1,r.push(new e("",[v,g,{tag:"",value:m}]));var b=n(p,s);return b.length>0?b[0].label=String(w):b.push(new e(w,[f,"",""])),[].push.apply(r,b),r.push(new e(m,[f,"",""])),r}function u(a,s){var r=[],t=a.args,u=t[0],p=t[1],h=l++,o=l++,c=l++;if(s){var w=i[u[0].name];w?(u[0].name=w,r.push(new e(h,u)),r.push(new e("",[v,g,{tag:"",value:o}])),r.push(new e("",[v,g,{tag:"",value:c}]))):(r.push(new e(h,u)),r.push(new e("",[v,g,{tag:"",value:c}])),r.push(new e("",[v,g,{tag:"",value:o}])))}var m=n(p,s);return m.push(new e("",[v,g,{tag:"",value:h}])),m[0].label=String(o),[].push.apply(r,m),r.push(new e(c,[f,"",""])),r}var p={};p.parse=a;var h={},l=0,i={GTE:"LT",LTE:"GT"};h.trans=s;var v={name:"JUMP",symbol:"JUMP"},f={name:"END",symbol:"END"},g={tag:"",value:""},o={};o.parser=p,o.transformer=h,"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:window.actionCompiler=o}();