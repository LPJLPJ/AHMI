!function(e){if("function"==typeof define&&define.amd)define("WidgetModel",["./layer"],e);else if("object"==typeof module&&module.exports){console.log(__dirpath);var t=require("./layer");module.exports=e(t)}else window.WidgetModel=e(window.LayerModel)}(function(e){function t(e,t,n,r,i){this.info={left:e,top:t,width:n,height:r},this.type="general",i&&i.length?this.layers=i:this.layers=[new o(n,r)]}function n(e,n,a,u,l,c,h){var f=new o(a,u);f.subLayers.font=new r(0,0,a,u,l,c),f.subLayers.texture=new i(0,0,a,u,h[0].imgSrc),f.subLayers.color=new s(0,0,a,u,h[0].color);var y=new o(a,u);y.subLayers.font=new r(0,0,a,u,l,c),y.subLayers.texture=new i(0,0,a,u,h[1].imgSrc),y.subLayers.color=new s(0,0,a,u,h[1].color);var d=[f,y];this.subType="Button",t.call(this,e,n,a,u,d)}var o=e.Layer,r=(e.ROISubLayer,e.FontSubLayer),i=e.TextureSubLayer,s=e.ColorSubLayer;t.prototype.toObject=function(){return{info:{left:this.info.left,top:this.info.top,width:this.info.width,height:this.info.height},layers:this.layers,onInitialize:this.onInitialize,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp}},t.getTag=function(){return 100},t.setTag=function(e){return console.log("set tag: ",e),1},t.execute=function(e){return"__tag"==e?this.getTag():"string"==typeof e?'"'+e+'"':e},n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.onInitialize=[],n.prototype.onMouseDown=[["set","this.layers[1].hidden",!1],["set","this.layers[0].hidden",!0]],n.prototype.onMouseUp=[["set","this.layers[1].hidden",!0],["set","this.layers[0].hidden",!1]];var a={},u={};a.transCommand=function(e){var n,o,r,i=e[0];switch(i){case"temp":o=e[1],r=t.execute(e[2]),u[o]=r,n="var "+o+"="+r+";\n";break;case"set":o=e[1],r=t.execute(e[2]),o in u&&(u[o]=r),n=o+"="+r+";\n";break;case"if":n="if";break;case"pred":var s=e[2],a=e[3];s in u||(s=t.execute(s)),a in u||(a=t.execute(a)),n="("+s+e[1]+a+"){\n";break;case"else":n="}else{\n";break;case"end if":n="}\n"}return n},a.transFunction=function(e){console.log(JSON.stringify(e)),u={};for(var t="",n=0;n<e.length;n++)t+=this.transCommand(e[n]);return t};var l={};return l.Button=n,l.Widget=t,l.WidgetCommandParser=a,l});