!function(e){if("function"==typeof define&&define.amd)define("WidgetModel",["./layer"],e);else if("object"==typeof module&&module.exports){console.log(__dirpath);var t=require("./layer");module.exports=e(t)}else window.WidgetModel=e(window.LayerModel)}(function(e){function t(e,t,n,r,i){this.info={left:e,top:t,width:n,height:r},this.tag="defaultTag",this.type="general",i&&i.length?this.layers=i:this.layers=[new o(n,r)]}function n(e,n,a,u,l,c,h){var f=new o(a,u);f.subLayers.font=new r(0,0,a,u,l,c),f.subLayers.texture=new i(0,0,a,u,h[0].imgSrc),f.subLayers.color=new s(0,0,a,u,h[0].color);var d=new o(a,u);d.subLayers.font=new r(0,0,a,u,l,c),d.subLayers.texture=new i(0,0,a,u,h[1].imgSrc),d.subLayers.color=new s(0,0,a,u,h[1].color);var y=[f,d];this.subType="Button",t.call(this,e,n,a,u,y)}var o=e.Layer,r=(e.ROISubLayer,e.FontSubLayer),i=e.TextureSubLayer,s=e.ColorSubLayer;t.prototype.toObject=function(){return{info:{left:this.info.left,top:this.info.top,width:this.info.width,height:this.info.height},tag:this.tag,layers:this.layers,onInitialize:this.onInitialize,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp}},t.getTag=function(e){return console.log("ctx tag",e),100},t.setTag=function(e){return console.log("set tag: ",e),1},t.execute=function(e,t){return"__tag"==t?this.getTag(e.tag):"string"==typeof t?'"'+t+'"':t},n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.onInitialize=[["temp","a","__tag"]],n.prototype.onMouseDown=[["set","this.layers[1].hidden",!1],["set","this.layers[0].hidden",!0]],n.prototype.onMouseUp=[["set","this.layers[1].hidden",!0],["set","this.layers[0].hidden",!1]];var a={},u={};a.transCommand=function(e,n){var o,r,i,s=n[0];switch(s){case"temp":r=n[1],i=t.execute(e,n[2]),u[r]=i,o="var "+r+"="+i+";\n";break;case"set":r=n[1],i=t.execute(e,n[2]),r in u&&(u[r]=i),o=r+"="+i+";\n";break;case"if":o="if";break;case"pred":var a=n[2],l=n[3];a in u||(a=t.execute(e,a)),l in u||(l=t.execute(e,l)),o="("+a+n[1]+l+"){\n";break;case"else":o="}else{\n";break;case"end if":o="}\n"}return o},a.transFunction=function(e,t){u={};for(var n="",o=0;o<t.length;o++)n+=this.transCommand(e,t[o]);return n};var l={};return l.Button=n,l.Widget=t,l.WidgetCommandParser=a,l});