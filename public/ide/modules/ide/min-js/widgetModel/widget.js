!function(e){if("function"==typeof define&&define.amd)define("WidgetModel",["./layer"],e);else if("object"==typeof module&&module.exports){console.log(__dirpath);var t=require("./layer");module.exports=e(t)}else window.WidgetModel=e(window.LayerModel)}(function(e){function t(e,t,n,o,i){this.info={left:e,top:t,width:n,height:o},this.type="general",i&&i.length?this.layers=i:this.layers=[new r(n,o)]}function n(e,n,s,u,l,c,f){var d=new r(s,u);d.subLayers.font=new o(0,0,s,u,l,c),d.subLayers.texture=new i(0,0,s,u,f[0].imgSrc),d.subLayers.color=new a(0,0,s,u,f[0].color);var h=new r(s,u);h.subLayers.font=new o(0,0,s,u,l,c),h.subLayers.texture=new i(0,0,s,u,f[1].imgSrc),h.subLayers.color=new a(0,0,s,u,f[1].color);var y=[d,h];this.subType="Button",t.call(this,e,n,s,u,y)}var r=e.Layer,o=(e.ROISubLayer,e.FontSubLayer),i=e.TextureSubLayer,a=e.ColorSubLayer;t.prototype.toObject=function(){return{info:{left:this.info.left,top:this.info.top,width:this.info.width,height:this.info.height},layers:this.layers,onInitialize:this.onInitialize}},t.getTag=function(){return 100},t.setTag=function(e){return console.log("set tag: ",e),1},t.execute=function(e){return"__tag"==e?this.getTag():"string"==typeof e?'"'+e+'"':e},n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.onInitialize=[["temp","a","__tag"],["if"],["pred","==","a","100"],["set","this.layers[1].hidden",!0],["else"],["set","this.layers[1].hidden",!1],["end if"]];var s={},u={};s.transCommand=function(e){var n,r,o,i=e[0];switch(i){case"temp":r=e[1],o=t.execute(e[2]),u[r]=o,n="var "+r+"="+o+";\n";break;case"set":r=e[1],o=t.execute(e[2]),r in u&&(u[r]=o),n=r+"="+o+";\n";break;case"if":n="if";break;case"pred":var a=e[2],s=e[3];a in u||(a=t.execute(a)),s in u||(s=t.execute(s)),n="("+a+e[1]+s+"){\n";break;case"else":n="}else{\n";break;case"end if":n="}\n"}return n},s.transFunction=function(e){console.log(JSON.stringify(e)),u={};for(var t="",n=0;n<e.length;n++)t+=this.transCommand(e[n]);return t};var l={};return l.Button=n,l.Widget=t,l.WidgetCommandParser=s,l});